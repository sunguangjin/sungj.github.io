<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="hooks," />










<meta name="description" content="Why &amp; When Refs åœ¨å…¸å‹çš„ React æ•°æ®æµä¸­ï¼ŒDOM å…ƒç´ çš„ä¿®æ”¹éƒ½æ˜¯é€šè¿‡ M-V çš„å½¢å¼é‡æ–°æ¸²æŸ“ã€‚M ä¸»è¦æ˜¯ç»„ä»¶çš„æœ¬åœ° state ï¼Œä»¥åŠçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„ propsã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨å…¸å‹æ•°æ®æµä¹‹å¤–ï¼Œæ‰‹åŠ¨ä½¿ç”¨&#x2F;æ“ä½œ DOMï¼š  ç®¡ç†ç„¦ç‚¹ï¼Œåª’ä½“æ’­æ”¾ï¼Œæ–‡æœ¬é€‰æ‹©ï¼Œè§¦å‘å¼ºåˆ¶åŠ¨ç”»ç­‰ã€‚ é›†æˆç¬¬ä¸‰æ–¹ DOM åº“ã€‚  è¿™ä¸ªæ—¶å€™ï¼Œå°±ä¸è¦ç”¨ç±»ä¼¼ document.getEle">
<meta property="og:type" content="article">
<meta property="og:title" content="æ‹¥æŠ±React-Hooksï¼ˆäºŒï¼‰- useRef">
<meta property="og:url" content="http://www.mala520.life/2020/03/30/%E6%8B%A5%E6%8A%B1React-Hooks%EF%BC%88%E4%BA%8C%EF%BC%89-Refs/index.html">
<meta property="og:site_name" content="Live and learn">
<meta property="og:description" content="Why &amp; When Refs åœ¨å…¸å‹çš„ React æ•°æ®æµä¸­ï¼ŒDOM å…ƒç´ çš„ä¿®æ”¹éƒ½æ˜¯é€šè¿‡ M-V çš„å½¢å¼é‡æ–°æ¸²æŸ“ã€‚M ä¸»è¦æ˜¯ç»„ä»¶çš„æœ¬åœ° state ï¼Œä»¥åŠçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„ propsã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨å…¸å‹æ•°æ®æµä¹‹å¤–ï¼Œæ‰‹åŠ¨ä½¿ç”¨&#x2F;æ“ä½œ DOMï¼š  ç®¡ç†ç„¦ç‚¹ï¼Œåª’ä½“æ’­æ”¾ï¼Œæ–‡æœ¬é€‰æ‹©ï¼Œè§¦å‘å¼ºåˆ¶åŠ¨ç”»ç­‰ã€‚ é›†æˆç¬¬ä¸‰æ–¹ DOM åº“ã€‚  è¿™ä¸ªæ—¶å€™ï¼Œå°±ä¸è¦ç”¨ç±»ä¼¼ document.getEle">
<meta property="article:published_time" content="2020-03-30T11:53:19.000Z">
<meta property="article:modified_time" content="2022-10-14T03:51:49.605Z">
<meta property="article:author" content="ç¥è¿">
<meta property="article:tag" content="hooks">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.mala520.life/2020/03/30/æ‹¥æŠ±React-Hooksï¼ˆäºŒï¼‰-Refs/"/>





<link rel="stylesheet" href="/js/prism/prism.css">

  <title>æ‹¥æŠ±React-Hooksï¼ˆäºŒï¼‰- useRef | Live and learn</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Live and learn</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.mala520.life/2020/03/30/%E6%8B%A5%E6%8A%B1React-Hooks%EF%BC%88%E4%BA%8C%EF%BC%89-Refs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥è¿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sgj.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live and learn">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">æ‹¥æŠ±React-Hooksï¼ˆäºŒï¼‰- useRef</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-03-30T19:53:19+08:00">
                2020-03-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Why-amp-When-Refs"><a href="#Why-amp-When-Refs" class="headerlink" title="Why &amp; When Refs"></a>Why &amp; When Refs</h1><hr>
<p>åœ¨å…¸å‹çš„ <code>React</code> æ•°æ®æµä¸­ï¼Œ<code>DOM</code> å…ƒç´ çš„ä¿®æ”¹éƒ½æ˜¯é€šè¿‡ <code>M-V</code> çš„å½¢å¼é‡æ–°æ¸²æŸ“ã€‚<code>M</code> ä¸»è¦æ˜¯ç»„ä»¶çš„æœ¬åœ° <code>state</code> ï¼Œä»¥åŠçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„ <code>props</code>ã€‚<br>ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨å…¸å‹æ•°æ®æµä¹‹å¤–ï¼Œæ‰‹åŠ¨ä½¿ç”¨/æ“ä½œ <code>DOM</code>ï¼š</p>
<ul>
<li>ç®¡ç†ç„¦ç‚¹ï¼Œåª’ä½“æ’­æ”¾ï¼Œæ–‡æœ¬é€‰æ‹©ï¼Œè§¦å‘å¼ºåˆ¶åŠ¨ç”»ç­‰ã€‚</li>
<li>é›†æˆç¬¬ä¸‰æ–¹ <code>DOM</code> åº“ã€‚</li>
</ul>
<p>è¿™ä¸ªæ—¶å€™ï¼Œå°±ä¸è¦ç”¨ç±»ä¼¼ <code>document.getElementById()</code> è¿™ç§åŸç”Ÿæ–¹å¼äº†ã€‚<code>React</code> æä¾›äº† <code>Refs</code> è¿™æ ·ä¸€ç§æ–¹å¼ï¼Œæ¥è®¿é—® <code>DOM</code> èŠ‚ç‚¹æˆ–åœ¨ <code>render</code> æ–¹æ³•ä¸­åˆ›å»ºçš„ <code>React</code> å…ƒç´ ã€‚</p>
<p>å¦å¤–ï¼Œ<code>refs</code> è¿˜å¯ç”¨äºåˆ›å»ºä¸€ä¸ªå¯å˜å¯¹è±¡ï¼ˆmutable objectï¼‰ï¼Œå¹¶ä¸”ä¿®æ”¹å®ƒä¸ä¼šè§¦å‘ç»„ä»¶æ›´æ–°ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¸€å®šä¸èƒ½æ»¥ç”¨ <code>Refs</code>ã€‚é¿å…ä½¿ç”¨ <code>refs</code> æ¥åšä»»ä½•å¯ä»¥é€šè¿‡<strong>å£°æ˜å¼æ¸²æŸ“</strong>ï¼ˆDeclarativeï¼ŒDOMéšçŠ¶æ€ï¼ˆæ•°æ®ï¼‰æ›´æ–°è€Œæ›´æ–°ï¼‰æ¥å®Œæˆçš„äº‹æƒ…ã€‚</p>
<h1 id="Class-ç»„ä»¶ä¸­çš„-Refs"><a href="#Class-ç»„ä»¶ä¸­çš„-Refs" class="headerlink" title="Class ç»„ä»¶ä¸­çš„ Refs"></a>Class ç»„ä»¶ä¸­çš„ Refs</h1><hr>
<p>åœ¨ç±»ç»„ä»¶ä¸­ï¼Œç›®å‰æœ‰ä¸‰ç§æ–¹å¼æ¥åˆ›å»ºå’Œä½¿ç”¨Refsï¼š</p>
<ul>
<li><code>Stringç±»Refs</code>: å®˜æ–¹è¡¨ç¤ºä¼šå¼ƒç”¨çš„ï¼Œè¿‡æ—¶çš„ <code>API</code>ï¼Œè¿˜ä¸æ”¯æŒå‡½æ•°ç»„ä»¶ã€‚æ‰€ä»¥<strong>åˆ«å†ç”¨äº†</strong>ã€‚</li>
<li><code>å›è°ƒRefs</code>ï¼šå°† å›è°ƒå‡½æ•° ä½œä¸º <code>ref</code> çš„ä¸€ç§æ–¹å¼ã€‚</li>
<li><code>React.createRef</code>: è¿™æ˜¯ <code>React@16.3</code> ç‰ˆæœ¬å¼•å…¥çš„ é¡¶å±‚ <code>API</code>ã€‚</li>
</ul>
<h2 id="Stringç±»refs"><a href="#Stringç±»refs" class="headerlink" title="Stringç±»refs"></a>Stringç±»refs</h2><p>å‘½åä¸€ä¸ª <code>string</code> ä½œä¸ºå…ƒç´ çš„<code>ref</code>å±æ€§ï¼Œç„¶åé€šè¿‡ <code>this.refs[string]</code> çš„å½¢å¼è®¿é—®ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªåª’ä½“æ’­æ”¾çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-jsx">import React from &#39;react&#39;;
class VideoPlay extends React.Component {
  constructor(props) {
    super(props);
  }
  componentDidMount () {
    // ä½¿ç”¨refs
    this.refs.myVideo.play()
  }
  render() {
    // åˆ›å»ºrefs
    return (
      &lt;video 
        ref=&#39;myVideo&#39; 
        src=&quot;https://media.w3.org/2010/05/sintel/trailer.mp4&quot; 
        playsinline=&quot;&quot; 
      /&gt;
    );
  }
}</code></pre>
<p>è¿‡æ—¶ <code>API</code>ï¼Œäº†è§£ä¸€ä¸‹å³å¯ã€‚å†æ¬¡å¼ºè°ƒï¼š<strong>ä¸è¦å†è¿™æ ·ä½¿ç”¨</strong>ã€‚</p>
<blockquote>
<p>å¤‡æ³¨ï¼šæœ¬ç¯‡æ–‡ç« çš„ç¤ºä¾‹éªŒè¯ï¼Œéƒ½æ˜¯ä½¿ç”¨ <code>React 16.12.0</code> ç‰ˆæœ¬ã€‚</p>
</blockquote>
<h2 id="å›è°ƒRefs"><a href="#å›è°ƒRefs" class="headerlink" title="å›è°ƒRefs"></a>å›è°ƒRefs</h2><p>ä½ å¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸º <code>ref</code>ã€‚è¿™ä¸ªå‡½æ•°ä¸­æ¥å— <code>React</code> ç»„ä»¶å®ä¾‹æˆ– <code>DOM</code> å…ƒç´ ä½œä¸ºå‚æ•°ï¼Œä»¥ä¾¿å®ƒä»¬èƒ½åœ¨å…¶ä»–åœ°æ–¹è¢«å­˜å‚¨å’Œè®¿é—®ã€‚<br><code>React</code> åœ¨ç»„ä»¶æŒ‚è½½æ—¶ï¼Œä¼šè°ƒç”¨ <code>ref</code> å›è°ƒå‡½æ•°å¹¶ä¼ å…¥ <code>DOM</code> å…ƒç´ ï¼Œå½“å¸è½½æ—¶è°ƒç”¨å®ƒå¹¶ä¼ å…¥ <code>null</code>ã€‚åœ¨ <code>componentDidMount</code> æˆ– <code>componentDidUpdate</code> è§¦å‘å‰ï¼Œ<code>React</code> ä¼šä¿è¯ <code>ref</code> ä¸€å®šæ˜¯æœ€æ–°çš„ã€‚</p>
<p>ä¸Šé¢çš„ä¾‹å­ç”¨ <code>å›è°ƒRefs</code> å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="language-jsx">import React from &#39;react&#39;;
class VideoPlay extends React.Component {
  constructor(props) {
    super(props);
  }
  componentDidMount () {
    // ä½¿ç”¨refs
    this.myVideo.play()
  }
  render() {
    // åˆ›å»ºrefs
    return (
      &lt;video 
        ref={ (elem) =&gt; { this.myVideo = elem } }
        src=&quot;https://media.w3.org/2010/05/sintel/trailer.mp4&quot; 
        playsinline=&quot;&quot; 
      /&gt;
    );
  }
}
</code></pre>
<h2 id="React-createRef"><a href="#React-createRef" class="headerlink" title="React.createRef"></a>React.createRef</h2><p><code>React 16.3</code> ç‰ˆæœ¬æ–°å¢çš„è¿™ä¸ªé¡¶å±‚ <code>API</code>ï¼Œç”¨äºåˆ›å»º <code>ref</code>ã€‚ç»„ä»¶æŒ‚è½½æ—¶ï¼Œä¼šæŠŠ <code>DOM</code> å…ƒç´ æˆ–ç»„ä»¶å®ä¾‹ä¼ ç»™ <code>ref</code> çš„ <code>current</code> å±æ€§ï¼Œå¹¶åœ¨ç»„ä»¶å¸è½½æ—¶ç½®ä¸º <code>null</code> ã€‚<code>ref</code> ä¼šåœ¨ <code>componentDidMount</code> æˆ– <code>componentDidUpdate</code> ç”Ÿå‘½å‘¨æœŸé’©å­è§¦å‘å‰æ›´æ–°ã€‚</p>
<p><code>ref</code> çš„å€¼æ ¹æ®å®ƒæ‰€èµ‹äºˆçš„èŠ‚ç‚¹çš„ç±»å‹æœ‰æ‰€ä¸åŒï¼š</p>
<ul>
<li>å½“ <code>ref</code> å±æ€§ç”¨äº <code>DOM</code> å…ƒç´ æ—¶ï¼Œ<code>ref</code> æ¥æ”¶åº•å±‚ <code>DOM</code> å…ƒç´ ä½œä¸ºå…¶ <code>current</code> å±æ€§ ï¼š</li>
</ul>
<pre><code class="language-jsx">import React from &#39;react&#39;;
class APP extends React.Component {
  constructor(props) {
    super(props);
    // åˆ›å»ºä¸€ä¸ª ref æ¥å­˜å‚¨ textInput çš„ DOM å…ƒç´ 
    this.textInput = React.createRef();
  }

  focusTextInput = () =&gt; {
    // ç›´æ¥ä½¿ç”¨åŸç”Ÿ API ä½¿ text è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹
    // æ³¨æ„ï¼šæˆ‘ä»¬é€šè¿‡ &quot;current&quot; æ¥è®¿é—® DOM èŠ‚ç‚¹
    this.textInput.current.focus();
  }

  render() {
    // å‘Šè¯‰ React æˆ‘ä»¬æƒ³æŠŠ &lt;input&gt; ref å…³è”åˆ°
    // æ„é€ å™¨é‡Œåˆ›å»ºçš„ `textInput` ä¸Š
    return (
      &lt;div&gt;
        &lt;input
          type=&quot;text&quot;
          ref={this.textInput} /&gt;
        &lt;input
          type=&quot;button&quot;
          value=&quot;Focus the text input&quot;
          onClick={this.focusTextInput}
        /&gt;
      &lt;/div&gt;
    );
  }
}
export default APP;</code></pre>
<ul>
<li>å½“ <code>ref</code> å±æ€§ç”¨äºè‡ªå®šä¹‰ <code>class</code> å­ç»„ä»¶æ—¶ï¼Œ<code>ref</code> å¯¹è±¡æ¥æ”¶ ç»„ä»¶çš„æŒ‚è½½å®ä¾‹ ä½œä¸ºå…¶ <code>current</code> å±æ€§ã€‚</li>
</ul>
<pre><code class="language-jsx">import React from &quot;react&quot;;
class APP extends React.Component {
  constructor(props) {
    super(props);
    // åˆ›å»ºä¸€ä¸ª ref æ¥å­˜å‚¨ å­ç»„ä»¶çš„å®ä¾‹
    this.textInput = React.createRef();
  }

  focusTextInput = () =&gt; {
    // æ³¨æ„ï¼šè¿™é‡Œ â€œrefâ€ çš„ &quot;current&quot; æ˜¯å­ç»„ä»¶çš„å®ä¾‹ 
    // æ‰€ä»¥å¯ä»¥è°ƒç”¨å®ä¾‹çš„ â€œsetValueâ€ æ–¹æ³•
    this.textInput.current.setValue(&quot;hello&quot;);
  };

  render() {
    // å‘Šè¯‰ React æˆ‘ä»¬æƒ³æŠŠ &lt;input&gt; ref å…³è”åˆ°
    // æ„é€ å™¨é‡Œåˆ›å»ºçš„ `textInput` ä¸Š
    return (
      &lt;div&gt;
        &lt;InputText ref={this.textInput} /&gt;
        &lt;input
          type=&quot;button&quot;
          value=&quot;Focus the text input&quot;
          onClick={this.focusTextInput}
        /&gt;
      &lt;/div&gt;
    );
  }
}
// æ³¨æ„ ä»…åœ¨ InputText ç»„ä»¶å£°æ˜ä¸º class çš„æ—¶å€™æœ‰ç”¨
class InputText extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: &quot;&quot;
    };
  }
  // æ¼”ç¤ºç”¨çš„å®ä¾‹æ–¹æ³•ï¼Œæ²¡ç°å®æ„ä¹‰
  setValue = value =&gt; {
    this.setState({ value });
  };
  render() {
    return &lt;input type=&quot;text&quot; value={this.state.value} /&gt;;
  }
}
export default APP;
</code></pre>
<p>å¦‚æœå­ç»„ä»¶é€šè¿‡ <code>import InputText from &quot;./InputText&quot;</code> çš„æ–¹å¼å¼•å…¥ï¼Œ<code>InputText</code> å°±æ˜¯å­ç»„ä»¶çš„å®ä¾‹ã€‚é‚£è¿™ç§ <code>refs</code> ä½œç”¨äºå­ç»„ä»¶çš„ä½¿ç”¨æ–¹å¼æ„ä¹‰ä½•åœ¨ï¼Ÿå¯èƒ½ç”¨ <code>refs</code> æ˜¾å¾—æ›´è¯­ä¹‰åŒ–ï¼Œè§„èŒƒåŒ–ã€‚æ¯”å¦‚ä½¿ç”¨äº†å¤šä¸ª <code>InputText</code> çš„æƒ…å†µã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š ä½ ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šåƒè¿™æ ·ä½¿ç”¨ <code>ref</code> å±æ€§ï¼Œå› ä¸ºå‡½æ•°ç»„ä»¶æ²¡æœ‰å®ä¾‹ã€‚ä¸è¿‡å¯ä»¥é€šè¿‡forwardRefè½¬å‘refsä½¿ç”¨ï¼Œè¿™ä¸ªåé¢ä¼šè®²åˆ°ã€‚</p>
</blockquote>
<h1 id="å‡½æ•°ç»„ä»¶ä¸­çš„-Refs"><a href="#å‡½æ•°ç»„ä»¶ä¸­çš„-Refs" class="headerlink" title="å‡½æ•°ç»„ä»¶ä¸­çš„ Refs"></a>å‡½æ•°ç»„ä»¶ä¸­çš„ Refs</h1><hr>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ€è€ƒè¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šç±»ç»„ä»¶ä¸­ä¸‰ç§ <code>refs</code> çš„ä½¿ç”¨æ–¹å¼èƒ½å¦åœ¨å‡½æ•°ç»„ä»¶ä¸­åº”ç”¨ã€‚æˆ‘ä»¬æ¥é€ä¸ªåˆ†æä¸€ä¸‹ã€‚</p>
<p>é¦–å…ˆï¼Œ<code>Stringç±»refs</code>ã€‚ä¸èƒ½ï¼å®˜æ–¹æ˜ç¡®è¡¨ç¤ºä¸æ”¯æŒå‡½æ•°ç»„ä»¶ï¼Œä¹Ÿæ˜¯è¿‡æ—¶ <code>API</code>, Just forget about itã€‚</p>
<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°ç»„ä»¶ä¸­åº”ç”¨ä¸€ä¸‹ <code>å›è°ƒrefs</code>ï¼Œæ¯”å¦‚å†™ä¸€ä¸ªè‡ªåŠ¨èšç„¦çš„ <code>input</code>ç»„ä»¶ï¼š</p>
<pre><code class="language-jsx">import React, { useState, useEffect } from &quot;react&quot;;

function App() {
  const [value, setValue] = useState(&quot;hellow hooks&quot;);
  let inputRef = null;

  console.log(inputRef);// æ—¥å¿—A
  useEffect(() =&gt; {
    console.log(inputRef); //æ—¥å¿—B
    inputRef.focus();
  });

  function inputHandler(val) {
    setValue(val.target.value);
  }

  return (
    &lt;&gt;
      &lt;input
        type=&quot;text&quot;
        value={value}
        ref={elem =&gt; {
          inputRef = elem;
        }}
        onChange={inputHandler}
      /&gt;
    &lt;/&gt;
  );
}
export default App;</code></pre>
<ul>
<li><p>ä¸Šé¢æ˜¯ä¸€ä¸ªç®€å•çš„ <code>input</code> è¾“å…¥ç»„ä»¶ã€‚</p>
</li>
<li><p>é€šè¿‡ <code>å›è°ƒrefs</code> åˆ›å»ºä¸€ä¸ª <code>ref</code>ï¼ˆ å¯¹åº” <code>input</code>å…ƒç´ ï¼‰ èµ‹å€¼ç»™ <code>inputRef</code> å˜é‡ã€‚</p>
</li>
<li><p>ä½¿ç”¨ <code>useEffect</code> å®ç°è‡ªåŠ¨ <code>focus</code>åŠŸèƒ½ã€‚è¿™é‡Œæ²¡æœ‰åŠ ä¾èµ–é¡¹ <code>[]</code> æ˜¯æƒ³çœ‹çœ‹ç»„ä»¶é‡æ–°æ¸²æŸ“ä»¥åï¼Œ<code>refs</code>çš„å˜åŒ–ã€‚</p>
</li>
<li><p>å‘ç°åŠŸèƒ½ä¸€åˆ‡æ­£å¸¸ã€‚æ¯æ¬¡æ¸²æŸ“ï¼Œæ—¥å¿—A ä¸º <code>null</code>ï¼Œæ—¥å¿—B ä¸º <code>&lt;input type=&quot;text&quot; value=&quot;hellow hooks&quot;&gt;&lt;/input&gt;</code>(å…¶ä¸­ <code>value</code> æ˜¯å½“å‰æœ€æ–°å€¼)ã€‚</p>
</li>
</ul>
<p>ä»¥ä¸Šï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šè‡³å°‘åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œ<code>å›è°ƒrefs</code> å®Œå…¨å¯ç”¨ã€‚ä½†æ˜¯ä»<code>æ—¥å¿—A</code>å’Œ<code>æ—¥å¿—B</code>çœ‹å‡ºï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé€šè¿‡<code>å›è°ƒrefs</code> çš„æ–¹å¼é‡æ–°åˆ›å»ºä¸€ä¸ª <code>ref</code> èµ‹å€¼ç»™ <code>inputRef</code> å˜é‡ã€‚æ˜æ˜¾å­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚</p>
<p>è®©æˆ‘ä»¬å†è¯•è¯•<code>createRef</code>ï¼Œè¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼š</p>
<pre><code class="language-jsx">import React, { useState, useEffect } from &quot;react&quot;;

function App() {
  const [value, setValue] = useState(&quot;hellow hooks&quot;);
  //åˆ›å»º refs
  const inputRef = React.createRef();
  // æ—¥å¿—A
  console.log(inputRef.current || null) 
  useEffect(() =&gt; {
    // æ—¥å¿—B
    console.log(inputRef.current);
    inputRef.current.focus();
  });

  function inputHandler(val) {
    setValue(val.target.value);
  }

  return (
    &lt;&gt;
      &lt;input type=&quot;text&quot; value={value} ref={inputRef} onChange={inputHandler} /&gt;
    &lt;/&gt;
  );
}
export default App;</code></pre>
<ul>
<li>ä½¿ç”¨ <code>createRef</code> åˆ›å»ºä¸€ä¸ª <code>inputRef</code>ï¼Œç›´æ¥èµ‹äºˆ <code>input</code> çš„ <code>ref</code> å±æ€§ã€‚æ¯” <code>å›è°ƒrefs</code> ä¼˜ç¾ä¸€äº›ã€‚</li>
<li>åŠŸèƒ½æ­£å¸¸ã€‚æ—¥å¿—è·Ÿ<code>å›è°ƒrefs</code> ä¸€æ ·ã€‚</li>
</ul>
<p>ç»“è®ºï¼šå’Œ <code>å›è°ƒrefs</code> ä¸€æ · <code>react.createRef</code> åŒæ ·å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ä½¿ç”¨ã€‚å½“ç„¶ä¹Ÿæœ‰åŒæ ·çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<blockquote>
<p>ç½‘ä¸Šæœ‰çœ‹åˆ°<a href="https://juejin.im/post/5e5c5f6a6fb9a07cad3ba383" target="_blank" rel="noopener">æ–‡ç« </a>è¯´åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œä½¿ç”¨ <code>react.createRef</code> æ°¸è¿œè·å–ä¸åˆ° <code>refs</code> ã€‚è¿™å’Œæˆ‘çš„éªŒè¯ä¸ç¬¦ï¼Œå¯èƒ½æ˜¯ç”±äº <code>React</code> ç‰ˆæœ¬å·®å¼‚ã€‚</p>
</blockquote>
<p>è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦è¯´æ˜ï¼Œä¸Šé¢çš„ä¸¤ä¸ªç¤ºä¾‹ä¹‹æ‰€ä»¥æœ‰æ€§èƒ½é—®é¢˜ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨äº† <code>hooks</code>ã€‚è€Œæˆ‘ä»¬ä½¿ç”¨çš„ä¸¤ç§ <code>refs</code> å¹¶æ²¡æœ‰ <code>hooks</code> ç‰¹æ€§ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ›´å¥½çš„é€‰æ‹©ã€‚</p>
<h1 id="useRef-hooks"><a href="#useRef-hooks" class="headerlink" title="useRef hooks"></a>useRef hooks</h1><hr>
<p>æ›´å¥½çš„é€‰æ‹©é‚£å°±æ˜¯ <code>useRef hooks</code>ï¼Œæˆ‘ä»¬å°†è¦å­¦ä¹ çš„æ–°çš„ <code>React Hooks</code>ï¼Œä¹Ÿæ˜¯ä»Šå¤©çš„ä¸»è§’ã€‚<br>å’Œ<code>createRef</code>ç›¸æ¯”ï¼Œå°±æ˜¯æ”¹ç”¨  <code>useRef</code> è¿™ä¸ª <code>hooks API</code> æ¥åˆ›å»º <code>ref</code>ï¼Œä½¿ç”¨ä¸Šå¹¶æ— å·®åˆ«ã€‚</p>
<p>è¿˜æ˜¯åŒæ ·çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-jsx">import React, { useState, useEffect, useRef } from &quot;react&quot;;

function App() {
  const [value, setValue] = useState(&quot;hellow hooks&quot;);
  //åˆ›å»º refs åªæœ‰è¿™é‡Œæœ‰ä¿®æ”¹
  const inputRef = useRef();

  // æ—¥å¿—A
  console.log(inputRef.current) 
  useEffect(() =&gt; {
    // æ—¥å¿—B
    console.log(inputRef.current);
    inputRef.current.focus();
  });

  function inputHandler(val) {
    setValue(val.target.value);
  }

  return (
    &lt;&gt;
      &lt;input type=&quot;text&quot; value={value} ref={inputRef} onChange={inputHandler} /&gt;
    &lt;/&gt;
  );
}
export default App;</code></pre>
<ul>
<li><strong>API</strong>ï¼šå’Œ <code>createRef</code> éå¸¸ç±»ä¼¼ã€‚<code>useRef</code> ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ä½œä¸º <code>ref</code> çš„ <code>current</code>å€¼ã€‚æœ‰ä¸ªç»†å¾®åŒºåˆ«æ˜¯ <code>createRef</code> çš„ <code>current</code> é»˜è®¤å€¼æ˜¯ <code>null</code>ï¼Œè€Œ <code>useRef</code> ä¸­é»˜è®¤æ˜¯ <code>undefined</code>ã€‚</li>
<li><strong>æ€§èƒ½</strong>ï¼šé‡æ–°æ¸²æŸ“æ—¶ï¼Œ<code>inputRef</code> ä¸ä¼šå†è¢«åˆå§‹åŒ–ã€‚<code>æ—¥å¿—A</code> å’Œ <code>æ—¥å¿—B</code> éƒ½æ‰“å° <code>&lt;input type=&quot;text&quot; value=&quot;Hello Reac&quot;&gt;&lt;/input&gt;</code>ï¼Œå¹¶ä¸”å…¶ä¸­ <code>value</code> æ˜¯å½“å‰æœ€æ–°å€¼ã€‚</li>
<li>åŸç†ï¼šå’Œ <code>useState</code> <code>useEffect</code> ä¸€æ ·ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ª â€œå†…å­˜å•å…ƒâ€ï¼Œé¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™åˆå§‹åŒ–ï¼ŒæŠŠ<code>Hooks</code>çš„æ•°æ®æŒ‰é¡ºåºå­˜å…¥å„ä¸ªå†…å­˜å•å…ƒæ ¼ï¼Œé‡æ–°æ¸²æŸ“çš„æ—¶å€™å†æŒ‰é¡ºåºä¾æ¬¡ä»å•å…ƒæ ¼è¯»å–ã€‚</li>
</ul>
<h1 id="æš´éœ²-Ref-ç»™çˆ¶ç»„ä»¶"><a href="#æš´éœ²-Ref-ç»™çˆ¶ç»„ä»¶" class="headerlink" title="æš´éœ² Ref ç»™çˆ¶ç»„ä»¶"></a>æš´éœ² Ref ç»™çˆ¶ç»„ä»¶</h1><p>åœ¨å®é™…å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨çˆ¶ç»„ä»¶ä¸­å¼•ç”¨å­èŠ‚ç‚¹çš„ <code>DOM</code> èŠ‚ç‚¹ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸å…‰éœ€è¦ <code>Ref</code>ï¼Œè¿˜è¦æŠŠ <code>Ref</code> çš„æ§åˆ¶æƒä¹Ÿäº¤ç»™çˆ¶ç»„ä»¶ã€‚</p>
<blockquote>
<p>å®˜æ–¹ä¸å»ºè®®å¦‚æ­¤ï¼Œå› ä¸ºå®ƒä¼šæ‰“ç ´ç»„ä»¶çš„å°è£…ï¼Œé€»è¾‘åˆ†æ•£ã€‚æ‰€ä»¥æˆ‘ä»¬è¦æ…ç”¨ï¼Œç„¶åè¯¥ç”¨è¿˜å¾—ç”¨ã€‚</p>
</blockquote>
<p>å½“ä½ å†³å®šå¦‚æ­¤ï¼Œè¿™é‡Œæœ‰ä¸‰ç§åŠæ³•ï¼š</p>
<ul>
<li>refå±æ€§ä¼ é€’: æ”¯æŒ<strong>æ‰€æœ‰</strong> <code>React</code> ç‰ˆæœ¬ï¼Œä¸æ”¯æŒå‡½æ•°å­ç»„ä»¶ã€‚<strong>ä¸æ¨è</strong></li>
<li>propsä¼ é€’: æ”¯æŒ<strong>æ‰€æœ‰</strong> <code>React</code> ç‰ˆæœ¬ï¼Œä¹Ÿæ”¯æŒå‡½æ•°å­ç»„ä»¶ã€‚</li>
<li>è½¬å‘refs: æ”¯æŒ <strong>React16.3</strong>åŠä»¥ä¸Šç‰ˆæœ¬ã€‚ä¹Ÿæ”¯æŒå‡½æ•°å­ç»„ä»¶ã€‚</li>
</ul>
<blockquote>
<p>çˆ¶ç»„ä»¶æ˜¯ç±»ç»„ä»¶è¿˜æ˜¯å‡½æ•°ç»„ä»¶ï¼Œåªå†³å®šä½ æ˜¯ç”¨<code>createRef</code> è¿˜æ˜¯ <code>useRef</code> åˆ›å»º <code>refs</code>ã€‚</p>
</blockquote>
<h2 id="refå±æ€§ä¼ é€’"><a href="#refå±æ€§ä¼ é€’" class="headerlink" title="refå±æ€§ä¼ é€’"></a>refå±æ€§ä¼ é€’</h2><p>å‰é¢åœ¨ä»‹ç» <code>createRef</code> çš„æ—¶å€™æœ‰æåˆ°ï¼šå½“ <code>ref</code> å±æ€§ç”¨äºè‡ªå®šä¹‰ <code>class</code> å­ç»„ä»¶æ—¶ï¼Œ<code>ref</code> å¯¹è±¡æ¥æ”¶<strong>ç»„ä»¶çš„æŒ‚è½½å®ä¾‹</strong> ä½œä¸ºå…¶ <code>current</code> å±æ€§ã€‚</p>
<p>æ³¨æ„äº†ï¼Œæˆ‘ä»¬è·å–åˆ°çš„æ˜¯å­ç»„ä»¶çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ <code>DOM</code> å…ƒç´ ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ æƒ³æ“ä½œå­ç»„ä»¶ï¼Œè¿˜éœ€è¦åœ¨å­ç»„ä»¶ä¹Ÿåˆ›å»º <code>ref</code>, å¹¶æŠŠç›¸å…³æ“ä½œå°è£…æˆä¸€ä¸ªæ–¹æ³•ä¾›çˆ¶ç»„ä»¶è°ƒç”¨ã€‚è¿™ä¹Ÿæ˜¯ä¸æ¨èè¿™ç§æ–¹å¼çš„åŸå› ã€‚</p>
<p>æ¯”å¦‚åœ¨æŸäº›åœºæ™¯ï¼Œæˆ‘ä»¬æƒ³åœ¨çˆ¶ç»„ä»¶è®©å­ç»„ä»¶ä¸­çš„ <code>input</code> è¾“å…¥æ¡†èšç„¦:</p>
<pre><code class="language-jsx">import React from &quot;react&quot;;

class APP extends React.Component {
  constructor(props) {
    super(props);
    // åˆ›å»ºä¸€ä¸ª ref æ¥å­˜å‚¨ å­ç»„ä»¶çš„å®ä¾‹
    this.inputText = React.createRef();
  }
  // æŒ‰é’®äº‹ä»¶å¤„ç†ä¸­ï¼Œå®ç°èšç„¦ã€‚
  // ä½ ä¹Ÿå¯ä»¥åœ¨ componentDidMount ä¸­å¤„ç†ï¼Œå®ç°è‡ªåŠ¨èšç„¦ã€‚
  focusInputText = () =&gt; {
    // æ³¨æ„ï¼šè¿™é‡Œ â€œrefâ€ çš„ &quot;current&quot; æ˜¯å­ç»„ä»¶çš„å®ä¾‹ 
    // åªèƒ½é€šè¿‡è°ƒç”¨å®ä¾‹çš„ doFocus æ–¹æ³•è¾¾åˆ°æ§åˆ¶ç›®çš„
    this.inputText.current.doFocus();
    // æ›´ä¸ä¼˜é›…çš„æ–¹å¼å¦‚ä¸‹
    this.inputText.current.inputRef.current.focus();
  };

  render() {
    return (
      &lt;&gt;
        &lt;InputText ref={this.inputText} /&gt;
        &lt;input
          type=&quot;button&quot;
          value=&quot;Focus the text input&quot;
          onClick={this.focusInputText}
        /&gt;
      &lt;/&gt;
    );
  }
}
// æ³¨æ„ ä»…åœ¨ InputText ç»„ä»¶å£°æ˜ä¸º class çš„æ—¶å€™æœ‰ç”¨
class InputText extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: &quot;&quot;
    };
    // å­ç»„ä»¶ä¹Ÿéœ€è¦åˆ›å»ºä¸€ä¸ªref
    this.inputRef = React.createRef();
  }
  // æä¾›ä¸€ä¸ªç»™çˆ¶ç»„ä»¶è°ƒç”¨çš„æ–¹æ³•
  doFocus = () =&gt; {
    this.inputRef.current.focus();
  };
  render() {
    return &lt;input type=&quot;text&quot; value={this.state.value} ref={this.inputRef} /&gt;;
  }
}
export default APP;</code></pre>
<p>ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li>ä¸æ”¯æŒå‡½æ•°å­ç»„ä»¶ï¼Œå¾ˆè‡´å‘½ã€‚</li>
<li>çˆ¶å­ç»„ä»¶éƒ½éœ€è¦åˆ›å»º <code>refs</code>ï¼Œæ€§èƒ½ä¸ä½³ã€‚</li>
</ul>
<h2 id="propsä¼ é€’"><a href="#propsä¼ é€’" class="headerlink" title="propsä¼ é€’"></a>propsä¼ é€’</h2><p>é¡¾åæ€ä¹‰ï¼Œæ—¢ç„¶ <code>ref</code> å±æ€§ä½œç”¨äºå­ç»„ä»¶ï¼Œæ˜¯è¿”å›æ•´ä¸ªç»„ä»¶å®ä¾‹ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>props</code> ä¼ é€’ <code>refs</code>ã€‚ä½ åªéœ€è¦ç»™å®ƒèµ·ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åå­—ã€‚</p>
<p>ä¸Šé¢çš„ç¤ºä¾‹ä¿®æ”¹åæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="language-jsx">import React from &quot;react&quot;;
class APP extends React.Component {
  constructor(props) {
    super(props);
    // åˆ›å»ºä¸€ä¸ª ref æ¥å­˜å‚¨ å­ç»„ä»¶çš„å®ä¾‹
    this.inputRef = React.createRef();
  }
  // æŒ‰é’®äº‹ä»¶å¤„ç†ä¸­ï¼Œå®ç°èšç„¦ã€‚
  focusInputText = () =&gt; {
    // æ³¨æ„ï¼šè¿™é‡Œ â€œrefâ€ çš„ &quot;current&quot; åœ¨å­ç»„ä»¶æŒ‚è½½çš„æ—¶å€™ å·²ç»æŒ‡å‘ input å…ƒç´ 
    this.inputRef.current.focus();
  };

  render() {
    return (
      &lt;&gt;
        &lt;InputText inputRef={this.inputRef} /&gt;
        &lt;input
          type=&quot;button&quot;
          value=&quot;Focus the text input&quot;
          onClick={this.focusInputText}
        /&gt;
      &lt;/&gt;
    );
  }
}
// æ³¨æ„ è¿™é‡Œç”¨å‡½æ•°ç»„ä»¶ä¹ŸåŒæ ·å¯ä»¥
class InputText extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: &quot;&quot;
    };
    // ref é€šè¿‡å‚æ•°è·å–
    this.inputRef = props.inputRef;
  }
  render() {
    return &lt;input type=&quot;text&quot; value={this.state.value} ref={this.inputRef} /&gt;;
  }
}
export default APP;</code></pre>
<p>å¤åˆ¶ä¸Šè¿°ä»£ç åˆ° <code>codesandbox</code> éªŒè¯ï¼ŒåŠŸèƒ½okã€‚å‘ç°æ²¡æœ‰ï¼Œä»£ç ç›¸å¯¹äº â€œrefå±æ€§â€ï¼Œç²¾ç®€ä¼˜é›…äº†è®¸å¤šã€‚è€Œä¸”ï¼Œä¹Ÿæ”¯æŒå‡½æ•°ç»„ä»¶ã€‚</p>
<p>æˆ‘ä»¬ç”¨ å‡½æ•°ç»„ä»¶ + <code>hooks</code> æ¥å®ç°ä¸Šè¿°ç¤ºä¾‹ï¼Œå¹¶ä¸”ä½¿ç”¨ <code>useEffect</code> å®ç°è‡ªåŠ¨<code>focus</code>ï¼š</p>
<pre><code class="language-jsx">import React, { useState, useEffect, useRef } from &#39;react&#39;;
const App = () =&gt; {
  const [greeting, setGreeting] = useState(&#39;Hello React!&#39;);
  const ref = useRef();
  useEffect(() =&gt; ref.current.focus(), []);
  const handleChange = event =&gt; setGreeting(event.target.value);
  return (
    &lt;div&gt;
      &lt;h1&gt;{greeting}&lt;/h1&gt;
      &lt;Input value={greeting} handleChange={handleChange} inputRef={ref} /&gt;
    &lt;/div&gt;
  );
};
const Input = ({ value, handleChange, inputRef }) =&gt; (
  &lt;input
    type=&quot;text&quot;
    value={value}
    onChange={handleChange}
    ref={inputRef}
  /&gt;
);
export default App;
</code></pre>
<h2 id="è½¬å‘refs-forwardRef"><a href="#è½¬å‘refs-forwardRef" class="headerlink" title="è½¬å‘refs - forwardRef"></a>è½¬å‘refs - forwardRef</h2><ul>
<li><p><code>Refè½¬å‘</code> æ˜¯é€šè¿‡ <code>React</code> æä¾›çš„ä¸€ä¸ªé¡¶å±‚ <code>API</code> - <code>forwardRef</code> æ¥å®ç°ã€‚</p>
</li>
<li><p><code>forwardRef</code> é€šè¿‡åŒ…è£…å­ç»„ä»¶çš„å½¢å¼ï¼Œå…è®¸å­ç»„ä»¶èƒ½æ¥æ”¶ <code>ref</code> ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¹¶å°†å…¶å‘ä¸‹ä¼ é€’ï¼ˆæ¢å¥è¯è¯´ï¼Œâ€œè½¬å‘â€ å®ƒï¼‰ç»™å­ç»„ä»¶ã€‚</p>
</li>
<li><p>å‰é¢æåˆ°è¿‡ï¼Œå°† <code>ref</code> ä½œä¸ºå­ç»„ä»¶çš„ <code>JSX</code> å±æ€§ï¼Œæ˜¯æ²¡æ³•æŠŠ <code>ref</code> ä¼ é€’ä¸‹å»ã€‚å‡½æ•°ç»„ä»¶ä¸æ”¯æŒï¼Œç±»ç»„ä»¶ä¹Ÿåªèƒ½è·å–åˆ°å­ç»„ä»¶çš„å®ä¾‹ã€‚ç°åœ¨é€šè¿‡ <code>forwardRef</code> åŒ…è£…å³å¯å®ç°ã€‚</p>
<p>è¯·çœ‹ç¤ºä¾‹ï¼š</p>
</li>
</ul>
<pre><code class="language-jsx">import React, {
  useState,
  useEffect,
  useRef,
  forwardRef,
} from &#39;react&#39;;

const App = () =&gt; {
  const [greeting, setGreeting] = useState(&#39;Hello React!&#39;);
  const handleChange = event =&gt; setGreeting(event.target.value);
  const ref = useRef();
  useEffect(() =&gt; ref.current.focus(), []);
  return (
    &lt;div&gt;
      &lt;h1&gt;{greeting}&lt;/h1&gt;
      &lt;Input value={greeting} handleChange={handleChange} ref={ref} /&gt;
    &lt;/div&gt;
  );
};

const Input = forwardRef(({ value, handleChange }, ref) =&gt; (
  &lt;input
    type=&quot;text&quot;
    value={value}
    onChange={handleChange}
    ref={ref}
  /&gt;
));

export default App;</code></pre>
<p>ä»¥ä¸‹æ˜¯å¯¹ä¸Šè¿°ç¤ºä¾‹å‘ç”Ÿæƒ…å†µçš„é€æ­¥è§£é‡Šï¼š</p>
<ul>
<li>æˆ‘ä»¬é€šè¿‡è°ƒç”¨ <code>React.useRef</code> åˆ›å»ºäº†ä¸€ä¸ª <code>ref</code> å¹¶å°†å…¶èµ‹å€¼ç»™ <code>ref</code> å˜é‡ã€‚</li>
<li>æˆ‘ä»¬é€šè¿‡æŒ‡å®š <code>ref</code> ä¸º <code>JSX</code> å±æ€§ï¼Œå°†å…¶å‘ä¸‹ä¼ é€’ç»™ <code>&lt;Input ref={ref}&gt;</code>ã€‚</li>
<li><code>React</code> ä¼ é€’ <code>ref</code> ç»™ <code>forwardRef</code> å†…å‡½æ•° <code>(props, ref) =&gt; ...</code>ï¼Œä½œä¸ºå…¶ç¬¬äºŒä¸ªå‚æ•°ã€‚</li>
<li>æˆ‘ä»¬å‘ä¸‹è½¬å‘è¯¥ <code>ref</code> å‚æ•°åˆ° <code>&lt;input ref={ref}&gt;</code>ï¼Œå°†å…¶æŒ‡å®šä¸º <code>JSX å±æ€§</code>ã€‚</li>
<li>å½“ <code>ref</code> æŒ‚è½½å®Œæˆï¼Œ<code>ref.current</code> å°†æŒ‡å‘ <code>&lt;input/&gt;</code> <code>DOM</code> èŠ‚ç‚¹ã€‚</li>
</ul>
<h3 id="forwardRef-useImperativeHandle"><a href="#forwardRef-useImperativeHandle" class="headerlink" title="forwardRef + useImperativeHandle"></a>forwardRef + useImperativeHandle</h3><p>æˆ‘ä»¬é€šè¿‡ forwardRef è¿›è¡Œ refsè½¬å‘ï¼Œå¹¶é…åˆ useImperativeHandle hooksï¼Œå¯ä»¥å°†å‡½æ•°å­ç»„ä»¶çš„æŒ‡å®šå…ƒç´ å’Œæ–¹æ³•æš´éœ²ç»™çˆ¶ç»„ä»¶ä½¿ç”¨ã€‚è¿™åœ¨å¾ˆå¤šç¨å¤æ‚çš„ä¸šåŠ¡åœºæ™¯éå¸¸æœ‰ç”¨ã€‚</p>
<p>API å¯æŠ½è±¡ä¸º: <code>useImperativeHandle(refParam, arrowFunction, [depsArr])</code> </p>
<ul>
<li><code>refParam</code>: å¿…é¡»ã€‚é€šè¿‡ <code>forwardRef</code>è½¬å‘çš„çˆ¶ç»„ä»¶ä¼ é€’çš„ <code>ref</code>ï¼Œä¹Ÿå°±æ˜¯<code>forwardRef</code>é‡Œå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</li>
<li><code>arrowFunction</code>: å¿…é¡»ã€‚å›è°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›çš„å¯¹è±¡å°†æš´éœ²ç»™çˆ¶ç»„ä»¶è®¿é—®ã€‚</li>
<li><code>depsArr</code>: éå¿…é¡»ã€‚ä¸€ä¸ªä¾èµ–é¡¹æ•°ç»„ã€‚å½“ä¾èµ–é¡¹æ”¹å˜çš„æ—¶å€™ä¼šé‡æ–°è°ƒç”¨ <code>arrowFunction</code>ã€‚</li>
</ul>
<p>æˆ‘ä»¬æ”¹ä¸€ä¸‹ä¸Šé¢çš„ç¤ºä¾‹ï¼Œè®©çˆ¶ç»„ä»¶å¯ä»¥ç›´æ¥è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•æ¥èšç„¦å­ç»„ä»¶ä¸­çš„ <code>input</code>ã€‚</p>
<pre><code class="language-jsx">import React, {
  useState,
  useEffect,
  useRef,
  forwardRef,
  useImperativeHandle
} from &#39;react&#39;;

const App = () =&gt; {
  const [greeting, setGreeting] = useState(&#39;Hello React!&#39;);
  const handleChange = event =&gt; setGreeting(event.target.value);
  const ref = useRef();

  useEffect(() =&gt; ref.current.doFocus(), []);

  return (
    &lt;div&gt;
      &lt;h1&gt;{greeting}&lt;/h1&gt;
      &lt;Input value={greeting} handleChange={handleChange} ref={ref} /&gt;
    &lt;/div&gt;
  );
};

const Input = forwardRef( ({ value, handleChange }, ref) =&gt; {
  const inputRef = useRef();

  useImperativeHandle(ref, () =&gt; ({ doFocus }), []);

  const doFocus = () =&gt; {
    inputRef.current.focus();
  }

  return (
    &lt;input
      type=&quot;text&quot;
      value={value}
      onChange={handleChange}
      ref={inputRef}
    /&gt;
  )
});

export default App;</code></pre>
<h1 id="å¯å˜å¯¹è±¡"><a href="#å¯å˜å¯¹è±¡" class="headerlink" title="å¯å˜å¯¹è±¡"></a>å¯å˜å¯¹è±¡</h1><p>å‰é¢æåˆ°ï¼Œ<code>refs</code> ä¸å…‰å¯ä»¥ç”¨äºå¼•ç”¨å’Œæ“ä½œ<code>Dom</code>ï¼Œè¿˜å¯ä»¥ç”¨äºåˆ›å»ºå¯å˜å¯¹è±¡ã€‚<br>æˆ‘ä»¬åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨<code>useRef hook</code>  æ¥åˆ›å»ºä¸€ä¸ªçœ‹çœ‹ï¼š</p>
<pre><code class="language-jsx">import React, { useState, useRef } from &quot;react&quot;;
function App() {
  const valRef = useRef(0);// React.createRef don&#39;t work
  let normalVal = 0;
  const [, setChange] = useState();
  return (
    &lt;div style={{ padding: "100px 200px" }}&gt;
      refValue: {valRef.current} | 
      normalValue: {normalVal}
      &lt;button
        onClick={() =&gt; {
          valRef.current += 80;
          normalVal += 1;
          setChange({});
        }}
      &gt;
        +
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
export default App;</code></pre>
<ul>
<li>å¯å˜å¯¹è±¡çš„æ”¹å˜ï¼Œä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚æ‰€ä»¥ç¤ºä¾‹å¢åŠ è°ƒç”¨äº† <code>setChange({})</code> æ¥è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ¥å±•ç¤ºå¯å˜å¯¹è±¡çš„å˜åŒ–ã€‚</li>
<li>ç‚¹å‡» <code>+</code> å·ï¼Œä½ ä¼šå‘ç° <code>refValue</code> ä¼šä¸æ–­é€’å¢ï¼Œè€Œ <code>normalValue</code> å§‹ç»ˆä¸º <code>0</code>.</li>
<li>è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„åŠŸèƒ½ï¼Œæš‚æ—¶è¿˜ä¸çŸ¥é“ä¼šåœ¨å“ªäº›åœºæ™¯ä¼šç”¨åˆ°å®ƒã€‚äº†è§£ä¸€ä¸‹å³å¯ã€‚</li>
</ul>
<h1 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h1><p>æ‰€è°“çš„æœ€ä½³å®è·µï¼Œä¹Ÿå°±æ˜¯å¯¹ä¸€äº›è§„åˆ™çš„æ€»ç»“ï¼š</p>
<ul>
<li>å°½é‡åœ¨å¿…è¦çš„æ—¶å€™ä½¿ç”¨<code>refs</code>ï¼Œé™¤äº†ä¸ªåˆ«éœ€è¦æ‰‹åŠ¨è·å–/æ“ä½œDomçš„åœºæ™¯ï¼šç®¡ç†ç„¦ç‚¹ï¼Œåª’ä½“æ’­æ”¾ï¼Œæ–‡æœ¬é€‰æ‹©ï¼Œè§¦å‘å¼ºåˆ¶åŠ¨ç”»ï¼Œé›†æˆç¬¬ä¸‰æ–¹ DOM åº“ç­‰ã€‚</li>
<li>ä¸è¦å†ä½¿ç”¨<code>Stringç±»refs</code>ï¼Œç±»ä¼¼ <code>this.refs.XX</code> è¿™ç§å½¢å¼ã€‚</li>
<li>ç±»ç»„ä»¶ä¸­ï¼š<code>React16.3</code> åŠä»¥ä¸Šç‰ˆæœ¬å»ºè®®ä½¿ç”¨<code>React.createRef</code> è¿™ä¸ª<code>API</code>ï¼Œä½ç‰ˆæœ¬ä½¿ç”¨<code>å›è°ƒrefs</code>ã€‚</li>
<li>å‡½æ•°ç»„ä»¶ä¸­ï¼šä¸ºæ€§èƒ½è€ƒè™‘ï¼Œå»ºè®®éƒ½ä½¿ç”¨ <code>useRef</code> è¿™ä¸ª <code>hook</code>ã€‚å³ä¾¿å®ƒæ— çŠ¶æ€ï¼Œæ— å‰¯ä½œç”¨ã€‚</li>
<li>å¯¹äº <code>refs</code> åœ¨çˆ¶å­ç»„ä»¶é—´ä¼ é€’çš„æƒ…å†µï¼Œæ…ç”¨ä½†è¯¥ç”¨è¿˜å¾—ç”¨ï¼Œç„¶åé¦–æ¨ <code>refsè½¬å‘</code>ï¼Œå…¶æ¬¡ <code>propsä¼ é€’</code>ã€‚</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><hr>
<p><a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener">å®˜ç½‘-refs</a><br><a href="https://zh-hans.reactjs.org/docs/forwarding-refs.html" target="_blank" rel="noopener">å®˜ç½‘-refsè½¬å‘</a><br><a href="https://zh-hans.reactjs.org/docs/lifting-state-up.html" target="_blank" rel="noopener">å®˜ç½‘-çŠ¶æ€æå‡</a><br><a href="https://www.robinwieruch.de/react-function-component" target="_blank" rel="noopener">React Function Components</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/hooks/" rel="tag"># hooks</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/18/%E6%8B%A5%E6%8A%B1React-Hooks/" rel="next" title="æ‹¥æŠ± React Hooks ï¼ˆä¸€ï¼‰åŸºç¡€">
                <i class="fa fa-chevron-left"></i> æ‹¥æŠ± React Hooks ï¼ˆä¸€ï¼‰åŸºç¡€
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/04/09/%E6%8B%A5%E6%8A%B1React-Hooks%EF%BC%88%E4%B8%89%EF%BC%89-Context/" rel="prev" title="æ‹¥æŠ±React-Hooksï¼ˆä¸‰ï¼‰- useContext">
                æ‹¥æŠ±React-Hooksï¼ˆä¸‰ï¼‰- useContext <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/sgj.jpeg"
                alt="ç¥è¿" />
            
              <p class="site-author-name" itemprop="name">ç¥è¿</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                å¤§ç‰›ğŸ‘‡
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ruanyifeng.com/blog/" title="é˜®ä¸€å³°" target="_blank">é˜®ä¸€å³°</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://overreacted.io/zh-hans/" title="Dan Abramov" target="_blank">Dan Abramov</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://qianduan.group/" title="å¯¸å¿—" target="_blank">å¯¸å¿—</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.robinwieruch.de/blog" title="Robin Wieruch" target="_blank">Robin Wieruch</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Why-amp-When-Refs"><span class="nav-number">1.</span> <span class="nav-text">Why &amp; When Refs</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Class-ç»„ä»¶ä¸­çš„-Refs"><span class="nav-number">2.</span> <span class="nav-text">Class ç»„ä»¶ä¸­çš„ Refs</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Stringç±»refs"><span class="nav-number">2.1.</span> <span class="nav-text">Stringç±»refs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å›è°ƒRefs"><span class="nav-number">2.2.</span> <span class="nav-text">å›è°ƒRefs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-createRef"><span class="nav-number">2.3.</span> <span class="nav-text">React.createRef</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å‡½æ•°ç»„ä»¶ä¸­çš„-Refs"><span class="nav-number">3.</span> <span class="nav-text">å‡½æ•°ç»„ä»¶ä¸­çš„ Refs</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#useRef-hooks"><span class="nav-number">4.</span> <span class="nav-text">useRef hooks</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æš´éœ²-Ref-ç»™çˆ¶ç»„ä»¶"><span class="nav-number">5.</span> <span class="nav-text">æš´éœ² Ref ç»™çˆ¶ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#refå±æ€§ä¼ é€’"><span class="nav-number">5.1.</span> <span class="nav-text">refå±æ€§ä¼ é€’</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#propsä¼ é€’"><span class="nav-number">5.2.</span> <span class="nav-text">propsä¼ é€’</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è½¬å‘refs-forwardRef"><span class="nav-number">5.3.</span> <span class="nav-text">è½¬å‘refs - forwardRef</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#forwardRef-useImperativeHandle"><span class="nav-number">5.3.1.</span> <span class="nav-text">forwardRef + useImperativeHandle</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¯å˜å¯¹è±¡"><span class="nav-number">6.</span> <span class="nav-text">å¯å˜å¯¹è±¡</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æœ€ä½³å®è·µ"><span class="nav-number">7.</span> <span class="nav-text">æœ€ä½³å®è·µ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å‚è€ƒèµ„æ–™"><span class="nav-number">8.</span> <span class="nav-text">å‚è€ƒèµ„æ–™</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ç¥è¿</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




<script src="/js/prism/prism.js" async></script>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.9},"log":false});</script></body>
</html>
