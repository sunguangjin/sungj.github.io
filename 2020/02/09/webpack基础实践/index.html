<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="ç®€ä»‹  webpack æ˜¯ä¸€ä¸ªç”¨äºç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚ç”¨äºå‰ç«¯ä»£ç çš„å·¥ç¨‹åŒ–ã€‚ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨æ„å»ºä¸€ä¸ª ä¾èµ–å›¾(dependency graph)ï¼Œæ­¤ä¾èµ–å›¾å¯¹åº”æ˜ å°„åˆ°é¡¹ç›®æ‰€éœ€çš„æ¯ä¸ªæ¨¡å—ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚ webpack + loader å¯ä»¥æ”¯æŒå¤šç§è¯­è¨€å’Œé¢„å¤„ç†å™¨è¯­æ³•ç¼–å†™çš„æ¨¡å—ã€‚loader å‘ webpack æè¿°äº†å¦‚">
<meta property="og:type" content="article">
<meta property="og:title" content="webpackåŸºç¡€å®è·µ">
<meta property="og:url" content="http://www.mala520.life/2020/02/09/webpack%E5%9F%BA%E7%A1%80%E5%AE%9E%E8%B7%B5/index.html">
<meta property="og:site_name" content="Live and learn">
<meta property="og:description" content="ç®€ä»‹  webpack æ˜¯ä¸€ä¸ªç”¨äºç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚ç”¨äºå‰ç«¯ä»£ç çš„å·¥ç¨‹åŒ–ã€‚ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨æ„å»ºä¸€ä¸ª ä¾èµ–å›¾(dependency graph)ï¼Œæ­¤ä¾èµ–å›¾å¯¹åº”æ˜ å°„åˆ°é¡¹ç›®æ‰€éœ€çš„æ¯ä¸ªæ¨¡å—ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚ webpack + loader å¯ä»¥æ”¯æŒå¤šç§è¯­è¨€å’Œé¢„å¤„ç†å™¨è¯­æ³•ç¼–å†™çš„æ¨¡å—ã€‚loader å‘ webpack æè¿°äº†å¦‚">
<meta property="article:published_time" content="2020-02-09T10:36:05.000Z">
<meta property="article:modified_time" content="2021-10-25T01:58:57.972Z">
<meta property="article:author" content="ç¥è¿">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.mala520.life/2020/02/09/webpackåŸºç¡€å®è·µ/"/>





<link rel="stylesheet" href="/js/prism/prism.css">

  <title>webpackåŸºç¡€å®è·µ | Live and learn</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Live and learn</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.mala520.life/2020/02/09/webpack%E5%9F%BA%E7%A1%80%E5%AE%9E%E8%B7%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥è¿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sgj.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live and learn">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">webpackåŸºç¡€å®è·µ</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-02-09T18:36:05+08:00">
                2020-02-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><hr>
<ul>
<li><code>webpack</code> æ˜¯ä¸€ä¸ªç”¨äºç°ä»£ <code>JavaScript</code> åº”ç”¨ç¨‹åºçš„<strong>é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·</strong>ã€‚ç”¨äºå‰ç«¯ä»£ç çš„<strong>å·¥ç¨‹åŒ–</strong>ã€‚</li>
<li><code>webpack</code> å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨æ„å»ºä¸€ä¸ª ä¾èµ–å›¾(<code>dependency graph</code>)ï¼Œæ­¤ä¾èµ–å›¾å¯¹åº”æ˜ å°„åˆ°é¡¹ç›®æ‰€éœ€çš„æ¯ä¸ªæ¨¡å—ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª <code>bundle</code>ã€‚</li>
<li><code>webpack + loader</code> å¯ä»¥æ”¯æŒå¤šç§è¯­è¨€å’Œé¢„å¤„ç†å™¨è¯­æ³•ç¼–å†™çš„æ¨¡å—ã€‚<code>loader</code> å‘ <code>webpack</code> æè¿°äº†å¦‚ä½•å¤„ç†éåŸç”Ÿæ¨¡å—ï¼Œå¹¶å°†ç›¸å…³ä¾èµ–å¼•å…¥åˆ°ä½ çš„ bundlesä¸­ã€‚</li>
<li><code>webpack</code> è¿˜æ”¯æŒå¯è‡ªç”±æ‰©å±•çš„æ’ä»¶( <code>plugin</code>)ä½“ç³»ã€‚è¿™æ˜¯ <code>webpack</code> çš„ æ”¯æŸ± åŠŸèƒ½ã€‚æ’ä»¶ç›®çš„åœ¨äºè§£å†³ <code>loader</code> æ— æ³•å®ç°çš„å…¶ä»–åŠŸèƒ½ã€‚</li>
<li><code>webpack</code> å¤©ç”Ÿæ”¯æŒå¦‚ä¸‹æ¨¡å—ç±»å‹ï¼š<code>ECMAScript</code> <code>CommonJS</code> <code>AMD</code> <code>Assets``WebAssembly</code>.</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ª <code>React + SASS</code> çš„ç®€å•<code>web</code>é¡¹ç›®ï¼Œæ¥å­¦ä¹ <code>webpack</code>çš„åŸºç¡€é…ç½®ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹é…ç½®éƒ½æ˜¯åŸºäº <code>webpack 4.30.0</code> ã€‚</p>
</blockquote>
<h1 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h1><hr>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å®‰è£…<code>webpack</code>ç³»åˆ—<code>npm</code>åŒ… (è¿™äº› <code>loader</code> å’Œ <code>plugins</code>ï¼Œåé¢ä¼šé€æ­¥ä»‹ç»):</p>
<pre><code class="language-js">// package.json
{
  &quot;devDependencies&quot;: {
    /** webpack **/
    &quot;webpack&quot;: &quot;4.30.0&quot;,  
    &quot;webpack-cli&quot;: &quot;3.3.12&quot;,
    &quot;webpack-dev-server&quot;: &quot;^3.7.2&quot;, // æœ¬åœ°è°ƒè¯•ç”¨
    /** loader **/
    &quot;css-loader&quot;: &quot;2.1.1&quot;,
    &quot;style-loader&quot;: &quot;^2.0.0&quot;,
    &quot;file-loader&quot;: &quot;^6.2.0&quot;,
    &quot;node-sass&quot;: &quot;^4.0.0&quot;,
    &quot;sass-loader&quot;: &quot;^7.1.0&quot;,
    &quot;@babel/preset-env&quot;: &quot;7.4.3&quot;,
    &quot;@babel/preset-react&quot;: &quot;7.0.0&quot;,
    /** plugins **/
    &quot;html-webpack-plugin&quot;: &quot;4.0.0&quot;,
    &quot;mini-css-extract-plugin&quot;: &quot;^0.6.0&quot;,
    &quot;webpack-bundle-analyzer&quot;: &quot;^4.4.0&quot;
  }
}</code></pre>
<p><code>webpack</code>æ‰“åŒ…ï¼Œéœ€è¦åšä¸€ç³»åˆ—çš„é…ç½®ï¼Œè€Œä¸” æœ¬åœ°è°ƒè¯• å’Œ ç”Ÿäº§æ‰“åŒ… çš„é…ç½®æ˜¯æœ‰ä¸€äº›å·®å¼‚çš„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹è®¾ç½®ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-js">|
|- webpack.config.js  # ç”Ÿäº§æ‰“åŒ…
|- webpack.config.dev.js # æœ¬åœ°è°ƒè¯•

// package.json
{
  //...
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;webpack-dev-server --config webpack.config.dev.js&quot;,
    &quot;build&quot;: &quot;webpack-cli&quot;
  }
  //...
}
</code></pre>
<p><code>webpack</code>é…ç½®æ–‡ä»¶å¯ä»¥ç›´æ¥è¿”å›ä¸€ä¸ª<code>json</code>å¯¹è±¡ï¼Œæˆ–è€…ä¸€ä¸ªè¿”å›<code>json</code>å¯¹è±¡çš„å‡½æ•°ã€‚</p>
<pre><code class="language-js">// webpack.config.js
export default {
  //...
}

//or

export default () =&gt; {
  return {
    //...
  }
}
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹å…·ä½“é…ç½®ï¼š</p>
<h2 id="entry"><a href="#entry" class="headerlink" title="entry"></a>entry</h2><p><code>web</code>é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´æœ‰<code>ä¸»JS</code>ï¼Œæˆ–è€…<code>å…¥å£JS</code>çš„æ¦‚å¿µã€‚<code>webpack</code>è¦æ‰“åŒ…ï¼Œæ„å»ºä¾èµ–å›¾è°±ã€‚è‚¯å®šä¹Ÿéœ€è¦ä¸€ä¸ªå…¥å£æ–‡ä»¶ã€‚<br><code>webpack</code> é€šè¿‡ <code>entry</code> æ¥é…ç½®ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰å…¥å£ã€‚é»˜è®¤å€¼æ˜¯ <code>./src/index.js</code>ã€‚</p>
<pre><code class="language-js">const path = require(&#39;path&#39;)

module.exports = {
  entry: &#39;./src/pages/app.js&#39;
}</code></pre>
<p>æˆ–è€…å¯¹è±¡ï¼Œå¯ä»¥æ ‡ç¤ºå…¥å£æ–‡ä»¶<code>name</code>ï¼ˆä¸€èˆ¬ç”¨äºå¤šä¸ªï¼‰</p>
<pre><code class="language-js">module.exports = {
  entry: {
    app: &#39;./src/pages/app.js&#39;
  }
}</code></pre>
<h2 id="output"><a href="#output" class="headerlink" title="output"></a>output</h2><p>æœ‰æ‰“åŒ…è¾“å…¥(<code>entry</code>)ï¼Œå°±æœ‰æ‰“åŒ…è¾“å‡ºã€‚<br><code>webpack</code>é€šè¿‡ <code>output</code> æ¥é…ç½®è¾“å‡ºæ–‡ä»¶ä¿¡æ¯ã€‚é»˜è®¤å€¼æ˜¯ <code>./dist/main.js</code>ï¼Œå…¶ä»–ç”Ÿæˆæ–‡ä»¶é»˜è®¤æ”¾ç½®åœ¨ <code>./dist</code> æ–‡ä»¶å¤¹ä¸­ã€‚</p>
<pre><code class="language-js">module.exports = {
  output: {
    path: path.resolve(__dirname, &#39;build&#39;),  // æŒ‡å®šè¾“å‡ºç›®å½•
    filename: &#39;[name].js&#39;, // æŒ‡å®šè¾“å‡ºæ–‡ä»¶åç§°ï¼›  [name] åŠ¨æ€ä½¿ç”¨entryæŒ‡å®šçš„åç§°ï¼Œå¯¹åº”ä¸Šé¢æ˜¯:app
  }
}</code></pre>
<p><strong>é«˜é˜¶é…ç½®</strong> </p>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é™æ€èµ„æºä¼šä½¿ç”¨<code>CDN</code>ï¼Œæˆ–è€…é€šè¿‡å…¶ä»–ç‰¹æœ‰ç›®å½•å¼•å…¥ã€‚<br>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ <code>publicPath</code>æ¥é…ç½®.</p>
<p>ç¼–è¯‘æ—¶æŒ‡å®šï¼š</p>
<pre><code class="language-js">module.exports = {
  output: {
    path: path.resolve(__dirname, &#39;build&#39;), 
    filename: &#39;[name].js&#39;,
    publicPath: &#39;/my-project/static/resource/&#39;,
  }
}</code></pre>
<p>è¿è¡Œæ—¶æŒ‡å®šï¼š</p>
<pre><code class="language-js">module.exports = {
  output: {
    path: path.resolve(__dirname, &#39;build&#39;), 
    filename: &#39;[name].js&#39;,
    publicPath: &#39;./&#39;, // å¯éšæ„å¡«å†™ï¼Œè¿è¡Œæ—¶ä¼šè¦†ç›–ä¸º __webpack_public_path__ 
  }
}
// é‡ç‚¹åœ¨è¿™é‡Œï¼š
__webpack_public_path__ = window.global_info.staticCDN; 
// å¦‚æœé¡¹ç›®åœ¨ä¸€ä¸ªJava/Nodeå®¹å™¨ï¼ŒstaticCDN çš„å€¼ä¸€èˆ¬æ˜¯æœåŠ¡ç«¯è·¯ç”±ä¸­è¯»å–ç¯å¢ƒå˜é‡èµ‹äºˆã€‚
// å¦‚æœé¡¹ç›®æ˜¯çº¯å‰ç«¯ï¼ŒstaticCDNçš„å€¼ä¸€èˆ¬æ˜¯é€šè¿‡ åŸŸå+è§„åˆ™ åˆ¤æ–­ç¡®å®šã€‚
</code></pre>
<h2 id="Loaders"><a href="#Loaders" class="headerlink" title="Loaders"></a>Loaders</h2><ul>
<li>é¢å‘ç°ä»£<code>JS</code>ï¼Œæˆ‘ä»¬å¤§éƒ½ä¸æ˜¯é€šè¿‡ç›´æ¥ç¼–å†™åŸç”Ÿ<code>JS</code>æ¥å¼€å‘é¡¹ç›®ï¼Œè€Œæ˜¯è¿ç”¨å„ç§æ¡†æ¶ï¼ˆ<code>React</code>ï¼Œ<code>Vue</code> â€¦â€¦ï¼‰ï¼Œå„ç§<code>JS+</code>è¯­è¨€ï¼ˆ<code>TS</code>ï¼Œ<code>JSX</code> â€¦â€¦ï¼‰ï¼Œ<code>ES5+</code> è¯­æ³•ç³–ç­‰ã€‚</li>
<li>ä½†æ˜¯æˆ‘ä»¬çš„æµè§ˆå™¨åªè¯†åˆ«åŸç”Ÿ<code>JS</code>ï¼Œè™½ç„¶ä¸»æµæµè§ˆå™¨ä¹Ÿå¼€å§‹å…¼å®¹ç»å¤§å¤šæ•°<code>ES5+</code>è¯­æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¾—è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ã€‚</li>
<li>æ‰€ä»¥ï¼Œ<code>webpack</code> æä¾›äº† <code>loaders</code> æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>loader</code> ç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢ã€‚</li>
<li>ä¸åŒçš„æ¨¡å—ç±»å‹ï¼Œåº”ç”¨ä¸åŒçš„ <code>loaders</code>ã€‚</li>
<li><code>loaders</code> æ˜¯é€šè¿‡ <code>module</code> å¯¹è±¡ä¸‹çš„ <code>rules</code> æ•°ç»„æ¥é…ç½®ã€‚</li>
</ul>
<p><strong>ç®€å•ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-js">module.exports = {
  module: {
    rules: [
      { test: /\.css$/, use: &#39;css-loader&#39; }, // å¯¹æ¯ä¸ª .css ä½¿ç”¨ css-loader
      { test: /\.ts$/, use: &#39;ts-loader&#39; }  // å¯¹æ‰€æœ‰ .ts æ–‡ä»¶ä½¿ç”¨ ts-loader
    ]
  }
}; 
</code></pre>
<ul>
<li><code>test</code>ï¼š <code>RegExp</code>ï¼Œç”¨æ¥åŒ¹é…éœ€è¦å¤„ç†çš„æ–‡ä»¶ç±»å‹ã€‚</li>
<li><code>use</code>ï¼š<code>String | Object | Array</code>ï¼ŒæŒ‡å®šå…·ä½“çš„ <code>loader</code>ã€‚ä¸Šè¿°ç¤ºä¾‹ï¼Œä½¿ç”¨ å•ä¸ªé»˜è®¤é…ç½®çš„ <code>loader</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>String</code>ç±»å‹æŒ‡å®šå³å¯ã€‚</li>
</ul>
<p>** <code>loader</code> å¯ä»¥é€šè¿‡ <code>options</code> å¯¹è±¡é…ç½®æ›´å¤šå‚æ•°ã€‚å¸¦å‚æ•°é…ç½®çš„å•ä¸ª<code>loader</code>ç¤ºä¾‹ï¼š**</p>
<pre><code class="language-js">module.exports = {
  module: {
    rules: [
       // å›¾ç‰‡èµ„æºå¤„ç†
      {
        test: /\.(png|jpg|jpeg|gif)$/,
        use: [
          {
            loader: require.resolve(&#39;file-loader&#39;),
            options: {   // loaderå‚æ•°é…ç½®
              esModule: false,
              name: &#39;./image/[name].[hash:8].[ext]&#39;
            }
          }
        ]
      }
    ]
  }
}
</code></pre>
<p>è´Ÿè´£å›¾ç‰‡å¤„ç†çš„ <code>loader</code> æœ‰ä¸¤ç§, ä¸€èˆ¬ä¸€èµ·ä½¿ç”¨ï¼š</p>
<ul>
<li><p><code>file-loader</code> å¯ä»¥æŠŠ<code>js</code>å’Œ<code>css</code>ä¸­å¯¼å…¥çš„å›¾ç‰‡æ›¿æ¢æˆæ­£ç¡®çš„åœ°å€ï¼Œå¹¶æŠŠå›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ°å¯¹åº”çš„ä½ç½®ã€‚æ–‡ä»¶åæ˜¯æ ¹æ®æ–‡ä»¶å†…å®¹è®¡ç®—å‡ºçš„<code>hash</code>å€¼ã€‚</p>
</li>
<li><p><code>url-loader</code> å¯ä»¥æŠŠæ–‡ä»¶é€šè¿‡ <code>base64</code> ç¼–ç åæ³¨å…¥åˆ°<code>JS</code> æˆ–è€… <code>css</code>ä¸­å»ã€‚å›¾ç‰‡çš„æ•°æ®é‡å¤ªå¤§ï¼Œä¼šå¯¼è‡´<code>JS</code>å’Œ<code>CSS</code>æ–‡ä»¶å˜å¤§ï¼Œä¸€èˆ¬åˆ©ç”¨<code>url-loader</code>æŠŠé¡µé¢éœ€è¦çš„å°å›¾ç‰‡æ³¨å…¥åˆ°ä»£ç ä¸­å»ï¼Œä»¥å‡å°‘åŠ è½½æ¬¡æ•°ã€‚<code>url-loader</code> é€šè¿‡  <code>limit</code> å‚æ•°æ¥æ§åˆ¶ï¼Œå°äº <code>limit</code>çš„å›¾ç‰‡æ‰ä¼šå¤„ç†ã€‚</p>
</li>
</ul>
<p><strong>å¤šä¸ª <code>loader</code> é…ç½®ï¼Œå°†æŒ‰ç…§ç›¸åçš„é¡ºåºæ‰§è¡Œã€‚ä»¥æ”¯æŒ <code>scss</code> ä¸ºä¾‹ï¼š</strong></p>
<pre><code class="language-js">module.exports = {
  module: {
    rules: [
      // å¤„ç†sassæ ·å¼æ–‡ä»¶
      {
        test: /\.(css|scss)$/,
        // ä½¿ç”¨å¤šä¸ª loadersï¼›éƒ½ä½¿ç”¨é»˜è®¤é…ç½®ï¼›
        use: [&quot;style-loader&quot;, &quot;css-loader&quot;,&quot;sass-loader&quot;]  
      } 
    ]
  }
}
</code></pre>
<ul>
<li><code>sass-loader</code> è´Ÿè´£æŠŠ<code>Scss</code>æºç è½¬æ¢ä¸º<code>CSS</code>ä»£ç ï¼Œå†äº¤ç»™<code>css-loader</code>å¤„ç†ã€‚</li>
<li><code>css-loader</code> ä¼šæ‰¾å‡º <code>@import</code> å’Œ <code>URL()</code> è¿™æ ·çš„å¯¼å…¥è¯­å¥ï¼Œå‘Šè¯‰<code>webpack</code>ä¾èµ–è¿™äº›èµ„æºã€‚åŒæ—¶è¿˜æ”¯æŒ<code>css modules</code>ï¼Œå‹ç¼©<code>css</code>ç­‰åŠŸèƒ½ã€‚</li>
<li><code>style-loader</code> ä¼šæŠŠ<code>css</code>ä»£ç è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç„¶åæ³¨å…¥åˆ°<code>JS</code>ä»£ç ä¸­ã€‚é€šè¿‡<code>JS</code>ç»™<code>DOM</code>å¢åŠ æ ·å¼ã€‚ä¹Ÿå¯ä»¥é€šè¿‡<code>plugin</code>ï¼ˆ <code>MiniCssExtractPlugin</code> ï¼‰æŠŠ<code>css</code>æå–åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚</li>
</ul>
<p><strong>æ’ä»¶ (<code>plugin</code>) å¯ä»¥ä¸º <code>loader</code> å¸¦æ¥æ›´å¤šç‰¹æ€§:</strong></p>
<pre><code class="language-js">module.exports = {
  module: {
    rules: [
      {
        test:  /\.(js|jsx)$/,
        exclude: /(node_modules)/, // æ­£åˆ™è¡¨è¾¾å¼ï¼Œè®¾ç½®è¯¥loaderéœ€è¦å¿½ç•¥/æ’é™¤çš„ç›®å½•/æ–‡ä»¶
        use: {
          loader: &#39;babel-loader&#39;,
          options: {
            presets: [&#39;@babel/preset-env&#39;,&#39;@babel/preset-react&#39;],
            cacheDirectory: true,
            plugins: [&#39;@babel/plugin-transform-runtime&#39;,&#39;@babel/plugin-proposal-class-properties&#39;]
          }
        }
      }
    ]
  }
}</code></pre>
<ul>
<li><p><code>@babel/runtimeå’Œ@babel/plugin-transform-runtime</code>ï¼š<code>babel</code> ç¼–è¯‘æ—¶åªè½¬æ¢è¯­æ³•ï¼Œå‡ ä¹å¯ä»¥ç¼–è¯‘æ‰€æœ‰æ—¶æ–°çš„ <code>JavaScript</code> è¯­æ³•ï¼Œä½†å¹¶ä¸ä¼šè½¬åŒ–<code>BOMï¼ˆæµè§ˆå™¨ï¼‰</code>é‡Œé¢ä¸å…¼å®¹çš„<code>API</code>ã€‚æ¯”å¦‚ <code>Promise</code>,<code>Set</code>,<code>Symbol</code>,<code>Array.from</code>,<code>async</code> ç­‰ç­‰çš„ä¸€äº›APIã€‚è¿™2ä¸ªåŒ…å°±æ˜¯æ¥æå®šè¿™äº›<code>api</code>çš„ã€‚</p>
</li>
<li><p><code>@babel/plugin-proposal-class-properties</code>ï¼šç”¨æ¥è§£æç±»çš„å±æ€§çš„ã€‚</p>
</li>
<li><p>åœ¨<code>babel</code>æ‰§è¡Œç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä»é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹çš„ <code>.balelrc</code> æ–‡ä»¶ä¸­è¯»å–é…ç½®ã€‚<code>.balelrc</code>æ˜¯ä¸€ä¸ª<code>json</code>æ ¼å¼çš„æ–‡ä»¶ï¼Œå½“<code>babel loader</code>é…ç½®é¡¹å¾ˆå¤šçš„æ—¶å€™å¯ä»¥ä½¿ç”¨ã€‚</p>
</li>
</ul>
<p>ç”±æ­¤å¯è§ï¼Œ <code>plugins</code> å¯ä»¥åœ¨ <code>loader</code> é…ç½®ä¸­é…åˆä½¿ç”¨ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å•ç‹¬é…ç½®ä½¿ç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥è¯¦è§£äº†è§£ä¸€ä¸‹<code>plugins</code>ã€‚</p>
<blockquote>
<p><a href="https://webpack.docschina.org/loaders/" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹å¸¸ç”¨ Loader List</a></p>
</blockquote>
<h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><ul>
<li><p>åŠŸèƒ½ï¼š ç”¨äºè§£å†³ <code>loader</code> æ— æ³•å®ç°çš„å…¶ä»–äº‹ï¼Œè¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚</p>
</li>
<li><p>åŸç†ï¼š<code>webpack plugins</code> æ˜¯ä¸€ä¸ªå…·æœ‰ <code>apply</code> æ–¹æ³•çš„ <code>JavaScript</code> å¯¹è±¡ã€‚<code>apply</code> æ–¹æ³•ä¼šè¢« <code>webpack compiler</code> è°ƒç”¨ï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªç¼–è¯‘ç”Ÿå‘½å‘¨æœŸéƒ½å¯ä»¥è®¿é—® <code>compiler</code> å¯¹è±¡ã€‚ä½ å¯ä»¥åŸºäºæ¬¡ç¼–å†™è‡ªå®šä¹‰æ’ä»¶ã€‚</p>
</li>
<li><p>ç”¨æ³•ï¼š å¯ä»¥é€šè¿‡åœ¨ <code>webpack.config.js</code> å¢åŠ <code>Plugins</code>é…ç½®ä½¿ç”¨ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ <code>NodeAPI</code> çš„å½¢å¼ä½¿ç”¨ã€‚</p>
</li>
</ul>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡å‡ ä¸ªå¸¸ç”¨çš„ <code>plugin</code> æ¥äº†è§£å¦‚ä½•é…ç½®ä½¿ç”¨ï¼š</p>
<pre><code class="language-js">// è¯¥æ’ä»¶å°†ä¸ºä½ ç”Ÿæˆä¸€ä¸ª HTML5 æ–‡ä»¶ï¼Œ åœ¨ body ä¸­ä½¿ç”¨ script æ ‡ç­¾å¼•å…¥ä½ æ‰€æœ‰ webpack ç”Ÿæˆçš„ bundleã€‚ 
const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)

// ä¸€èˆ¬ï¼Œpluginséƒ½æ˜¯é€šè¿‡ new ä¸€ä¸ªè‡ªèº«çš„å®ä¾‹æ¥ä½¿ç”¨
// æ”¯æŒoptionå¯¹è±¡å‚æ•°é…ç½®
module.exports = {
  plugins: [
    new HtmlWebpackPlugin({
      template: &#39;./temp.html&#39;,  // å¯ä»¥è‡ªå®šä¹‰ç”¨äºç”ŸæˆHtmlçš„æ¨¡ç‰ˆæ–‡ä»¶ï¼Œéå¿…å¡«
      filename: &#39;home.html&#39;  //  æŒ‡å®šhtmlæ–‡ä»¶åç§°ï¼›é»˜è®¤ä¸º index.html
    })
  ]
}</code></pre>
<p>** ä½¿ç”¨é»˜è®¤é…ç½®ç”Ÿæˆçš„ <code>html</code> æ–‡ä»¶å¦‚ä¸‹ï¼š**</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;webpack App&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script src=&quot;index_bundle.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<blockquote>
<p>å¤šä¸ª <code>entry</code>ï¼Œå¯¹åº”å¤šä¸ª <code>script</code> æ ‡ç­¾ã€‚</p>
</blockquote>
<p>å‰é¢æœ‰æåˆ°ï¼Œæœ‰çš„ <code>plugins</code> å¯ä½œä¸ºæœ‰äº› <code>loader</code> çš„ <code>option</code> é…ç½®é¡¹ä½¿ç”¨ã€‚</p>
<p>è¿˜æœ‰ä¸€äº›æ’ä»¶éœ€è¦åœ¨<code>Plugins</code>å’Œ<code>Loader</code>ä¸­éƒ½éœ€è¦å¢åŠ é…ç½®ï¼š</p>
<pre><code class="language-js">// æœ¬æ’ä»¶ä¼šå°† CSS æå–åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­
const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);

module.exports = {
  module: {
    rules: [
      {
        test: /\.(css|scss)$/,
        use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;,&quot;sass-loader&quot;]
      },
    ]
  },
  plugins: [
    new MiniCssExtractPlugin({ filename: &#39;[name].css&#39;})
  ]
}</code></pre>
<blockquote>
<p>ä½¿ç”¨<code>MiniCssExtractPlugin</code> ç”Ÿæˆçš„<code>css</code>æ–‡ä»¶ä¼šåœ¨ç”Ÿæˆçš„<code>Html</code>æ–‡ä»¶ä¸­é€šè¿‡<code>&lt;link&gt;</code>å¼•å…¥ã€‚æ‰€ä»¥ä¸å†éœ€è¦ä½¿ç”¨ <code>style-loader</code>ã€‚<br><code>style-loader</code>: å°†æ¨¡å—å¯¼å‡ºçš„å†…å®¹ä½œä¸ºæ ·å¼å¹¶æ·»åŠ åˆ° <code>DOM</code> ä¸­ã€‚</p>
</blockquote>
<h2 id="mode"><a href="#mode" class="headerlink" title="mode"></a>mode</h2><ul>
<li><code>production</code> or <code>development</code>.ç”¨æ¥æŒ‡å®šæ˜¯ç”Ÿäº§æ¨¡å¼è¿˜æ˜¯å¼€å‘æ¨¡å¼ã€‚</li>
<li>åœ¨ä»£ç ä¸­å¯ä»¥é€šè¿‡<code>process.env.NODE_ENV</code>è·å–ï¼Œç”¨æ¥åšä¸¤ç§æ¨¡å¼çš„å…¼å®¹å¤„ç†ã€‚</li>
</ul>
<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬è¿™ä¸ªç®€å•é¡¹ç›®çš„å®Œæ•´<code>webpack.config.js</code>é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">const path = require(&#39;path&#39;)
const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)
const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);

module.exports = () =&gt; {
  return {
    mode: &#39;production&#39;,
    entry: {
      app: path.resolve(__dirname, &#39;src/pages/app.js&#39;),
    },
    output: {
      path: path.resolve(__dirname, &#39;build&#39;),
      publicPath: &#39;/my-project/static/resource/&#39;,
      filename: &#39;[name].js&#39;,
    },
    resolve: {
      extensions: [&#39;.js&#39;, &#39;.jsx&#39;, &#39;.ts&#39;],
    },
    module: {
      rules: [
        {
          test: /\.(css|scss)$/,
          use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;,&quot;sass-loader&quot;]
        },
        {
          test:  /\.(js|jsx)$/,
          exclude: /(node_modules)/,
          use: {
            loader: &#39;babel-loader&#39;,
            options: {
              presets: [&#39;@babel/preset-env&#39;,&#39;@babel/preset-react&#39;],
              cacheDirectory: true,
              plugins: [&#39;@babel/plugin-transform-runtime&#39;,&#39;@babel/plugin-proposal-class-properties&#39;]
            }
          }
        },
        {
          test: /\.(png|jpg|jpeg|gif)$/,
          use: [
            {
              loader: require.resolve(&#39;file-loader&#39;),
              options: {
                esModule: false,
                name: &#39;./image/[name].[hash:8].[ext]&#39;
              }
            }
          ]
        }  
      ]
    },
    plugins: [
      new HtmlWebpackPlugin({template: &#39;./temp.html&#39;, filename: &#39;home.html&#39;}),
      new MiniCssExtractPlugin({ filename: &#39;[name].css&#39;})
    ],
    optimization: {
      splitChunks: {
        cacheGroups: {
          default: {
            name: &#39;common&#39;,
            chunks: &#39;initial&#39;
          }
        }
      }
    }
  }
}
</code></pre>
<blockquote>
<p><code>resolve.extensions</code> : å¦‚æœæ–‡ä»¶å¼•å…¥çš„æ—¶å€™æ²¡æœ‰åç¼€åï¼Œå°†è‡ªåŠ¨æŒ‰é…ç½®çš„æ–‡ä»¶ååŒ¹é…æŸ¥æ‰¾ã€‚<br><code>optimization</code>: ç”¨äºæå–å…¬å…±<code>js</code>é…ç½®ã€‚</p>
</blockquote>
<h1 id="å¼€å‘æ¨¡å¼"><a href="#å¼€å‘æ¨¡å¼" class="headerlink" title="å¼€å‘æ¨¡å¼"></a>å¼€å‘æ¨¡å¼</h1><hr>
<p>æˆ‘ä»¬åœ¨æœ¬åœ°è°ƒè¯•çš„æ—¶å€™ï¼Œ<code>webpack</code> é…ç½®å’Œç”Ÿäº§ä¼šæœ‰ä¸€äº›å·®å¼‚ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>ç”Ÿäº§å¯èƒ½é…ç½®ç‰¹æ®Šçš„<code>publicPath</code>ï¼Œæœ¬åœ°åˆ™ä¸èƒ½é…ç½®ã€‚</li>
<li>æœ¬åœ°è°ƒè¯•ä¸“ç”¨çš„ <code>devServer</code> é…ç½®ã€‚</li>
<li>å¼€å‘æ¨¡å¼ä¸“ç”¨çš„ä¸€äº›<code>plugins</code>ã€‚</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥è®¾ç½®å•ç‹¬çš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚ <code>webpack.config.dev.js</code>ï¼‰ï¼š</p>
<pre><code class="language-js">// ä¸‹é¢åªå±•ç¤ºå·®å¼‚ç‚¹é…ç½®
// new plugin ç”¨æ¥åšæ‰“åŒ…åæ–‡ä»¶çš„æˆåˆ†åˆ†æï¼Œä»¥åšæŸäº›ä¼˜åŒ–ã€‚
const BundleAnalyzerPlugin = require(&#39;webpack-bundle-analyzer&#39;).BundleAnalyzerPlugin 

module.exports = () =&gt; {
  return {
    mode: &#39;development&#39;, // æŒ‡å®šä¸ºå¼€å‘ç¯å¢ƒ
    // ä¸‹æ—  publicPathé…ç½®
    output: {
      path: path.resolve(__dirname, &#39;pcDist&#39;),
      filename: &#39;[name].js&#39;,
    },
    // ä¸“ç”¨plugin
    plugins: [
      new BundleAnalyzerPlugin()
    ],
    // æœ¬åœ°è°ƒè¯•ä¸“ç”¨é…ç½®
    devServer: {
      contentBase: path.join(__dirname, &#39;pcDist&#39;),
      port: 8009,
      hot:true,
      open: true
    }
  }
}
</code></pre>
<p><code>DevServer</code> å…¶å®æ˜¯ä¸€ä¸ªæ–¹ä¾¿å¼€å‘çš„å°å‹<code>http</code>æœåŠ¡å™¨ï¼Œæ˜¯åŸºäº<code>webpack-dev-middleware</code> å’Œ <code>Express</code> å®ç°çš„ã€‚<code>webpack-dev-middleware</code> ä¼šå¯¼å‡ºä¸€ä¸ªå‡½æ•°ã€‚è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ª <code>webpack</code> çš„ <code>Compiler</code> å®ä¾‹ä½œä¸ºå‚æ•°ï¼Œå¯¼å‡ºä¸€ä¸ª <code>Express</code> ä¸­é—´ä»¶ã€‚è¯¥ä¸­é—´ä»¶å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>æ¥æ”¶ <code>Compiler</code> å®ä¾‹è¾“å‡ºçš„æ–‡ä»¶ï¼Œä½†ä¸ä¼šå­˜åœ¨ç¡¬ç›˜ï¼Œè€Œæ˜¯æ”¾å…¥å†…å­˜ã€‚</li>
<li>å¾€ <code>Express</code> <code>app</code> ä¸Šæ³¨å†Œè·¯ç”±ï¼Œæ‹¦æˆª<code>http</code>è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚è·¯å¾„å“åº”å¯¹åº”çš„æ–‡ä»¶ã€‚</li>
</ul>
<blockquote>
<p>æ˜æ˜¾ï¼Œå¼€å‘å’Œç”Ÿäº§é…ç½®å¤§éƒ¨åˆ†è¿˜æ˜¯é€šç”¨ã€‚æ‰€ä»¥åœ¨å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªé€šç”¨é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨è‡ªæœ‰çš„cliå·¥å…·åº“ä¸­å»æŠ½è±¡ï¼Œå¤„ç†ï¼Œå¤ç”¨ã€‚</p>
</blockquote>
<h1 id="module-chunk-bundleç†è§£"><a href="#module-chunk-bundleç†è§£" class="headerlink" title="module,chunk,bundleç†è§£"></a>module,chunk,bundleç†è§£</h1><ul>
<li><code>moule</code> æ˜¯æ¨¡å—ï¼Œ<code>webpack</code>ä¸­ä¸€åˆ‡çš†æ¨¡å—ï¼Œæ‰€ä»¥ <code>module</code> å°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„ä¸€ä¸ªä¸ªæ–‡ä»¶ã€‚</li>
<li><code>chunk</code> æ˜¯æŒ‡ <code>webpack</code> æ ¹æ®æ–‡ä»¶å¼•ç”¨å…³ç³»ç”Ÿæˆçš„ <code>chunk</code> æ–‡ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ª <code>entry</code> å¯¹åº”ä¸€ä¸ª <code>chunk</code> æ–‡ä»¶ã€‚</li>
<li><code>bundle</code> æ˜¯æŒ‡ <code>webpack</code> æœ€ç»ˆç”Ÿæˆçš„æµè§ˆå™¨å¯ä»¥ç›´æ¥è¿è¡Œçš„ <code>bundle</code> æ–‡ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ª <code>chunk</code> å¯¹åº”ä¸€ä¸ª <code>bundle</code> æ–‡ä»¶ã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–ï¼Œæ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨ <code>MiniCssExtractPlugin</code> æ’ä»¶ä¼šä»ä¸€ä¸ª <code>chunk</code> ä¸­æŠ½å–å‡ºå•ç‹¬çš„ <code>css bundle</code>æ–‡ä»¶ã€‚</li>
</ul>
<h1 id="webpack-å¼‚æ­¥åŠ è½½"><a href="#webpack-å¼‚æ­¥åŠ è½½" class="headerlink" title="webpack å¼‚æ­¥åŠ è½½"></a>webpack å¼‚æ­¥åŠ è½½</h1><hr>
<p>åœ¨ä½¿ç”¨ <code>webpack</code> æ‰“åŒ…çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>require.ensure</code> è¿›è¡Œå¼‚æ­¥åŠ è½½ï¼Œä¹Ÿæœ‰äººç§°ä¸ºä»£ç åˆ‡å‰²ã€‚ä»–å…¶å®å°±æ˜¯å°†æŒ‡å®šçš„ <code>js</code> æ¨¡å—ç‹¬ç«‹å¯¼å‡ºä¸€ä¸ª<code>.js</code> æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå†åˆ›å»ºä¸€ä¸ª <code>script</code> å¯¹è±¡ï¼ŒåŠ å…¥åˆ° <code>document.head</code> å¯¹è±¡ä¸­ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å‘èµ·è¯·æ±‚ï¼Œå»è¯·æ±‚è¿™ä¸ª <code>js</code> æ–‡ä»¶ï¼Œç„¶åå†™ä¸ªå›è°ƒå‡½æ•°ï¼Œè®©è¯·æ±‚åˆ°çš„ <code>js</code> æ–‡ä»¶åšä¸€äº›ä¸šåŠ¡æ“ä½œã€‚</p>
<p><code>require.ensure</code> è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªä»£ç åˆ†ç¦»çš„åˆ†å‰²çº¿ï¼Œè¡¨ç¤ºå›è°ƒé‡Œé¢çš„ <code>require</code> æ˜¯æˆ‘ä»¬æƒ³è¦è¿›è¡Œåˆ†å‰²å‡ºå»çš„ï¼Œ<code>webpack</code> ä¼šæ‰“åŒ…æˆå•ç‹¬ <code>js</code> æ–‡ä»¶ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">// è¯­æ³•å¦‚ä¸‹ï¼š
`require.ensure(dependencies: String[], callback: function(require), chunkName: String)`</code></pre>
<h2 id="æŒ‰éœ€åŠ è½½"><a href="#æŒ‰éœ€åŠ è½½" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h2><p><code>webpack4</code> å®˜æ–¹æ–‡æ¡£æä¾›äº†æ¨¡å—æŒ‰éœ€åˆ‡å‰²åŠ è½½ï¼Œé…åˆ <code>es6</code> çš„æŒ‰éœ€åŠ è½½ <code>import()</code> æ–¹æ³•ï¼Œå¯ä»¥åšåˆ°å‡å°‘é¦–é¡µåŒ…ä½“ç§¯ï¼ŒåŠ å¿«é¦–é¡µçš„è¯·æ±‚é€Ÿåº¦ï¼Œåªæœ‰å…¶ä»–æ¨¡å—ï¼Œåªæœ‰å½“éœ€è¦çš„æ—¶å€™æ‰ä¼šåŠ è½½å¯¹åº” <code>js</code>ã€‚</p>
<p><code>import()</code>çš„è¯­æ³•ååˆ†ç®€å•ã€‚è¯¥å‡½æ•°åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯å¼•ç”¨åŒ…çš„åœ°å€ï¼Œå¹¶ä¸”ä½¿ç”¨äº† <code>promise</code> å¼çš„å›è°ƒï¼Œè·å–åŠ è½½çš„åŒ…ã€‚åœ¨ä»£ç ä¸­æ‰€æœ‰è¢« <code>import()</code>çš„æ¨¡å—ï¼Œéƒ½å°†æ‰“æˆä¸€ä¸ªå•ç‹¬çš„åŒ…ï¼Œæ”¾åœ¨ <code>chunk</code> å­˜å‚¨çš„ç›®å½•ä¸‹ã€‚åœ¨æµè§ˆå™¨è¿è¡Œåˆ°è¿™ä¸€è¡Œä»£ç æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è¯·æ±‚è¿™ä¸ªèµ„æºï¼Œå®ç°å¼‚æ­¥åŠ è½½ã€‚</p>
<h1 id="å¸¸ç”¨çš„ä¼˜åŒ–æ‰‹æ®µ"><a href="#å¸¸ç”¨çš„ä¼˜åŒ–æ‰‹æ®µ" class="headerlink" title="å¸¸ç”¨çš„ä¼˜åŒ–æ‰‹æ®µ"></a>å¸¸ç”¨çš„ä¼˜åŒ–æ‰‹æ®µ</h1><ul>
<li><p>ä¼˜åŒ–<code>loader</code>é…ç½®ï¼š é€šè¿‡ <code>include</code> ç­‰é…ç½®ï¼Œä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶å°½é‡ä¸å¤„ç†ã€‚</p>
</li>
<li><p>å¼‚æ­¥æŒ‰éœ€åŠ è½½:ï¼ˆä¸Šé¢æœ‰ä¸“é—¨æåˆ°ï¼‰ã€‚</p>
</li>
<li><p>åˆ†åŒ…ï¼šæå–å…¬å…±çš„ä¸€äº›æ¨¡å— + ç¼“å­˜æé«˜æ€§èƒ½ã€‚</p>
<ul>
<li><code>SplitChunksPlugin</code>: æå–å…¬å…±æ¨¡å—ï¼Œé—®é¢˜æ˜¯ä¸šåŠ¡æ¨¡å—ä¾èµ–æ”¹å˜ä¹Ÿä¼šå½±å“å…¬å…±åŒ…ï¼Œå“ˆå¸Œä¼šæ”¹å˜ï¼Œç¼“å­˜ä¼šå¤±æ•ˆã€‚</li>
<li><code>Dllplugin &amp; DllReferencePlugin</code>: å°†æŒ‡å®šçš„å…¬å…±æ¨¡å—æ‰“åŒ…æˆåŠ¨æ€é“¾æ¥åº“å½¢å¼çš„jsæ–‡ä»¶ã€‚å…¶ä»–æ¨¡å—å¼•ç”¨åˆ°è¿™äº›æŒ‡å®šçš„å…¬å…±æ¨¡å—ä¼šç›´æ¥åœ¨å…¬å…±jsæ–‡ä»¶ä¸­åŠ è½½ï¼Œä¸ä¼šæ‰“åŒ…åœ¨ä¸šåŠ¡æ¨¡å—ä¸­ã€‚é—®é¢˜æ˜¯è¿™äº›åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶è¦ç‹¬ç«‹å…ˆè¡Œæ‰“åŒ…ï¼Œå¹¶æå‰å¼•å…¥ã€‚</li>
</ul>
</li>
<li><p><code>Tree Shaking</code>: webpackä¾èµ–é™æ€çš„ ES6 æ¨¡å—åŒ–è¯­æ³•ï¼Œåˆ†æå‡ºéƒ½è¦å“ªäº›åŠŸèƒ½è¢«ç”¨åˆ°äº†ï¼Œç„¶åå‰”é™¤æ²¡æœ‰çš„ä»£ç ã€‚å¯ä»¥åœ¨å¯åŠ¨ <code>Webpack</code> æ—¶å¸¦ä¸Š <code>--optimize-minimize</code> å‚æ•°ï¼Œå¿«é€Ÿæ¥å…¥ <code>Tree Shaking</code>ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>UglifyJSPlugin</code> æ¥å¤„ç†ã€‚</p>
</li>
<li><p><code>Scope Hoisting</code>ï¼ˆä½œç”¨åŸŸæå‡ï¼‰: åˆ†æå‡ºæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°½å¯èƒ½çš„æŠŠæ‰“æ•£çš„æ¨¡å—åˆå¹¶åˆ°ä¸€ä¸ªå‡½æ•°ä¸­å»ï¼Œä½†å‰ææ˜¯ä¸èƒ½é€ æˆä»£ç å†—ä½™ã€‚å› æ­¤åªæœ‰é‚£äº›è¢«å¼•ç”¨äº†ä¸€æ¬¡çš„æ¨¡å—æ‰èƒ½è¢«åˆå¹¶ã€‚</p>
<ul>
<li>ä½¿ç”¨å†…ç½®çš„ <code>ModuleConcatenationPlugin()</code> å³å¯å¼€å¯ã€‚</li>
</ul>
</li>
</ul>
<h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><hr>
<ul>
<li><a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener">webpackå®˜ç½‘</a></li>
<li><a href="https://webpack.docschina.org/concepts/" target="_blank" rel="noopener">webpackä¸­æ–‡ç½‘</a></li>
<li><a href="https://webpack.wuhaolin.cn" target="_blank" rel="noopener">æ·±å…¥æµ…å‡ºwebpack</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1551693" target="_blank" rel="noopener">è½»æ¾ç†è§£webpackçƒ­æ›´æ–°åŸç†</a></li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/01/19/micro-service/" rel="next" title="å¾®å‰ç«¯å…¥é—¨Micro-frontends">
                <i class="fa fa-chevron-left"></i> å¾®å‰ç«¯å…¥é—¨Micro-frontends
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/02/25/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" rel="prev" title="å¸¸ç”¨å‘½ä»¤">
                å¸¸ç”¨å‘½ä»¤ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/sgj.jpeg"
                alt="ç¥è¿" />
            
              <p class="site-author-name" itemprop="name">ç¥è¿</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                å¤§ç‰›ğŸ‘‡
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ruanyifeng.com/blog/" title="é˜®ä¸€å³°" target="_blank">é˜®ä¸€å³°</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://overreacted.io/zh-hans/" title="Dan Abramov" target="_blank">Dan Abramov</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://qianduan.group/" title="å¯¸å¿—" target="_blank">å¯¸å¿—</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.robinwieruch.de/blog" title="Robin Wieruch" target="_blank">Robin Wieruch</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ç®€ä»‹"><span class="nav-number">1.</span> <span class="nav-text">ç®€ä»‹</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åŸºç¡€é…ç½®"><span class="nav-number">2.</span> <span class="nav-text">åŸºç¡€é…ç½®</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#entry"><span class="nav-number">2.1.</span> <span class="nav-text">entry</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#output"><span class="nav-number">2.2.</span> <span class="nav-text">output</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Loaders"><span class="nav-number">2.3.</span> <span class="nav-text">Loaders</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Plugins"><span class="nav-number">2.4.</span> <span class="nav-text">Plugins</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mode"><span class="nav-number">2.5.</span> <span class="nav-text">mode</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¼€å‘æ¨¡å¼"><span class="nav-number">3.</span> <span class="nav-text">å¼€å‘æ¨¡å¼</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#module-chunk-bundleç†è§£"><span class="nav-number">4.</span> <span class="nav-text">module,chunk,bundleç†è§£</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#webpack-å¼‚æ­¥åŠ è½½"><span class="nav-number">5.</span> <span class="nav-text">webpack å¼‚æ­¥åŠ è½½</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#æŒ‰éœ€åŠ è½½"><span class="nav-number">5.1.</span> <span class="nav-text">æŒ‰éœ€åŠ è½½</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¸¸ç”¨çš„ä¼˜åŒ–æ‰‹æ®µ"><span class="nav-number">6.</span> <span class="nav-text">å¸¸ç”¨çš„ä¼˜åŒ–æ‰‹æ®µ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å‚è€ƒæ–‡çŒ®"><span class="nav-number">7.</span> <span class="nav-text">å‚è€ƒæ–‡çŒ®</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ç¥è¿</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




<script src="/js/prism/prism.js" async></script>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.9},"log":false});</script></body>
</html>
