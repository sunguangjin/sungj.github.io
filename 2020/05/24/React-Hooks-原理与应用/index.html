<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="React Hooks èµ·æº React ä¸€ç›´éƒ½æå€¡ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ã€‚æ›´è½»ä¾¿ï¼Œæ›´ä¼˜é›…ï¼Œæ€§èƒ½æ›´ä½³ã€‚å‡½æ•°å¼ç»„ä»¶åˆç§°æ— çŠ¶æ€ç»„ä»¶(FSC)ã€‚ ä»¥å‰ï¼Œéœ€è¦ä½¿ç”¨ state ï¼Œç”Ÿå‘½å‘¨æœŸç­‰React ç‰¹æ€§ï¼Œå¿…é¡»é‡æ„ä¸º class ç»„ä»¶ã€‚ Hooks æ˜¯ React 16.8 æ–°å¢çš„ç‰¹æ€§ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚ ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ç°æœ‰çš„å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿">
<meta property="og:type" content="article">
<meta property="og:title" content="React Hooks åŸç†ä¸åº”ç”¨">
<meta property="og:url" content="http://www.mala520.life/2020/05/24/React-Hooks-%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/index.html">
<meta property="og:site_name" content="Live and learn">
<meta property="og:description" content="React Hooks èµ·æº React ä¸€ç›´éƒ½æå€¡ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ã€‚æ›´è½»ä¾¿ï¼Œæ›´ä¼˜é›…ï¼Œæ€§èƒ½æ›´ä½³ã€‚å‡½æ•°å¼ç»„ä»¶åˆç§°æ— çŠ¶æ€ç»„ä»¶(FSC)ã€‚ ä»¥å‰ï¼Œéœ€è¦ä½¿ç”¨ state ï¼Œç”Ÿå‘½å‘¨æœŸç­‰React ç‰¹æ€§ï¼Œå¿…é¡»é‡æ„ä¸º class ç»„ä»¶ã€‚ Hooks æ˜¯ React 16.8 æ–°å¢çš„ç‰¹æ€§ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚ ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ç°æœ‰çš„å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿">
<meta property="og:image" content="http://www.mala520.life/2020/05/24/React-Hooks-%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/hooks-1.jpg">
<meta property="og:image" content="http://www.mala520.life/2020/05/24/React-Hooks-%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/react-hooks2.jpg">
<meta property="article:published_time" content="2020-05-24T12:15:11.000Z">
<meta property="article:modified_time" content="2021-10-25T01:58:57.956Z">
<meta property="article:author" content="ç¥è¿">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.mala520.life/2020/05/24/React-Hooks-%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/hooks-1.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.mala520.life/2020/05/24/React-Hooks-åŸç†ä¸åº”ç”¨/"/>





<link rel="stylesheet" href="/js/prism/prism.css">

  <title>React Hooks åŸç†ä¸åº”ç”¨ | Live and learn</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Live and learn</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.mala520.life/2020/05/24/React-Hooks-%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥è¿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sgj.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live and learn">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">React Hooks åŸç†ä¸åº”ç”¨</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-05-24T20:15:11+08:00">
                2020-05-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="React-Hooks-èµ·æº"><a href="#React-Hooks-èµ·æº" class="headerlink" title="React Hooks èµ·æº"></a>React Hooks èµ·æº</h1><ul>
<li>React ä¸€ç›´éƒ½æå€¡ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ã€‚æ›´è½»ä¾¿ï¼Œæ›´ä¼˜é›…ï¼Œæ€§èƒ½æ›´ä½³ã€‚å‡½æ•°å¼ç»„ä»¶åˆç§°<strong>æ— çŠ¶æ€ç»„ä»¶(FSC)</strong>ã€‚</li>
<li>ä»¥å‰ï¼Œéœ€è¦ä½¿ç”¨ <code>state</code> ï¼Œç”Ÿå‘½å‘¨æœŸç­‰React ç‰¹æ€§ï¼Œå¿…é¡»é‡æ„ä¸º class ç»„ä»¶ã€‚</li>
<li><code>Hooks</code> æ˜¯ React 16.8 æ–°å¢çš„ç‰¹æ€§ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ <code>class</code> çš„æƒ…å†µä¸‹ä½¿ç”¨ <code>state</code> ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</li>
<li>ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ç°æœ‰çš„å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨ <code>Hooks</code>ï¼Œè€Œæ— é¡»é‡æ„ä¸º <code>class</code> ç»„ä»¶ã€‚</li>
<li>å…¨æ–°çš„æ€ç»´æ–¹å¼ã€‚no magic, just javascript and some rulesã€‚</li>
</ul>
<img src="/2020/05/24/React-Hooks-%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/hooks-1.jpg" class="" title="hooksèµ·æº">

<h1 id="ç±»ç»„ä»¶è¢«è¯Ÿç—…"><a href="#ç±»ç»„ä»¶è¢«è¯Ÿç—…" class="headerlink" title="ç±»ç»„ä»¶è¢«è¯Ÿç—…"></a>ç±»ç»„ä»¶è¢«è¯Ÿç—…</h1><ul>
<li>ç±»(ç´¯)ï¼šè‡ªjså¼€å¤©è¾Ÿåœ°ï¼Œå°±æ˜¯é¢å‘å‡½æ•°å¼ç¼–ç¨‹(<code>FP</code>), é¢å‘å¯¹è±¡ç¼–ç¨‹(<code>OOP</code>)ä¸ºä½•ç‰©ã€‚çƒ¦äººçš„æ„é€ å‡½æ•°ã€‚<code>super</code>æ˜¯ä»€ä¹ˆï¼Ÿâ€¦â€¦</li>
<li>thisç»‘å®šï¼šç±»æ–¹æ³•ä¸ä¼šè‡ªåŠ¨ç»‘å®š this åˆ°å®ä¾‹ä¸Šã€‚ç°æœ‰å››ç§<code>bind</code>æ–¹å¼ã€‚ä¸ä¼˜é›…ï¼Œæ˜“å‡ºé”™ï¼Œ<code>bind</code>è¿˜å½±å“æ€§èƒ½ï¼ˆä½¿ç”¨ç®­å¤´å‡½æ•°åæœ‰æ‰€æ”¹å–„ï¼‰ã€‚</li>
<li><code>setState()</code>: å¼‚æ­¥æ›´æ–°æœºåˆ¶ï¼Œ<code>state</code> æµ…åˆå¹¶æœºåˆ¶ã€‚ä¸ç†è§£è¿™äº›æ¦‚å¿µï¼Œå¾ˆå®¹æ˜“è¸©å‘ã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸè€¦åˆï¼šæ¯ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•é€šå¸¸åŒ…å«ä¸€å †ä¸ç›¸å…³çš„é€»è¾‘ï¼›ä¸åŒç”Ÿå‘½å‘¨æœŸä¸­çš„é€»è¾‘åˆæœ‰å…³è”ã€‚</li>
</ul>
<p>ä¸‹é¢ç»„ä»¶æ¥è‡ªå®é™…é¡¹ç›®ï¼Œç»è¿‡ç®€åŒ–å’Œå¾®è°ƒï¼ˆæ–¹ä¾¿æ¼”ç¤ºå’Œç›´è§‚æ„Ÿå—ï¼‰ï¼ŒåŸºæœ¬ä¸Šæš´éœ²å‡ºäº†ä¸Šé¢æ‰€æœ‰é—®é¢˜ã€‚ä¸šåŠ¡é€»è¾‘ä¸¥è°¨æ€§ä¸ç”¨æ¨æ•²ï¼š</p>
<pre><code class="language-jsx">class NumberInput extends React.Component {
  constructor(props) {
    // ä¸ºä»€ä¹ˆå¿…é¡»superï¼Œä¸ä¼ propsä¼šæ€æ ·
    super(props)
    this.state = {
      focus: false
    }
    this.tradingpwd = &#39;&#39;
    // ç¬¬ä¸€ç§bindï¼Œå®˜æ–¹æ¨è
    ;[&#39;onBlur&#39;].forEach(method =&gt; {
      this[method] = this[method].bind(this)
    })
  }
  // ä¸‹é¢ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå¾—ç›¸äº’é…åˆï¼Œå®ç°æŸäº›åŠŸèƒ½
  componentDidMount() {
    this.tradingPwdHideInput.focus()
    // å¤„ç†æŸç±»å…¼å®¹é—®é¢˜
    let bodyTop = document.body.getBoundingClientRect().top
    const styleText = &#39;position: fixed; width: 100%; top: &#39; + bodyTop + &#39;px&#39;
    document.body.style.cssText = styleText
  }

  componentWillUnmount() {
    this.tradingPwdHideInput.blur()
    document.body.style.position = &#39;static&#39;
  }

  tradingPwdChange(e) {
    // ...
    this.tradingpwd = e.target.value
    this.props.inputChangeCallback(e.target.value)
    // ...
  }
  // ç¬¬äºŒç§bind
  onFocus = () =&gt; {
    this.setState({
      focus: true
    })
  }
  onBlur() {
    this.setState({
      focus: false
    })
  }

  render() {
    return (
      &lt;div className={classNames(&#39;NumberInput&#39;)}&gt;
        &lt;input
          type=&#39;tel&#39;
          ref={ref =&gt; {
            this.tradingPwdHideInput = ref
          }}
          id=&#39;tradingPwdHideInput&#39;
          /* ç¬¬ä¸‰ç§bind */
          onClick={() =&gt; {
            this.tradingPwdHideInput.focus()
          }}
          onBlur={ this.onBlur }
          onFocus={ this.onFocus }
          /* ç¬¬å››ç§bindï¼Œä¸æ¨èï¼Œåœ¨æ¯æ¬¡ render() æ–¹æ³•æ‰§è¡Œæ—¶ç»‘å®šç±»æ–¹æ³•ï¼Œæ¶ˆè€—æ€§èƒ½*/
          onChange={ this.tradingPwdChange.bind(this) }
        /&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<blockquote>
<p><a href="https://github.com/tc39/proposal-class-fields" target="_blank" rel="noopener">proposal-class-fields</a> æ–°ææ¡ˆä¼šæ”¹å–„ä¸Šè¿°æƒ…å†µï¼Œç›®å‰å¤„äºç¬¬ä¸‰é˜¶æ®µã€‚</p>
</blockquote>
<p>éšç€ç±»ç»„ä»¶è¶‹äºå¤æ‚ï¼Œè¿˜æœ‰å…¶ä»–è¯Ÿç—…ï¼š</p>
<ul>
<li>éš¾æ‹†åˆ†ï¼Œæœ¬åœ°<code>state</code>é€»è¾‘åˆ°å¤„éƒ½æ˜¯ï¼Œå½“ç»„ä»¶è¶Šæ¥è¶Šå¤æ‚ï¼Œæƒ³æ‹†åˆ†æ¯”è¾ƒéš¾ã€‚</li>
<li>çŠ¶æ€é€»è¾‘éš¾å¤ç”¨ï¼šéœ€è¦å¼•å…¥é«˜é˜¶ç‰¹æ€§è¿›è¡Œä»£ç é‡æ„ï¼Œéœ€è¦è°ƒæ•´ç»„ä»¶ç»“æ„ï¼Œæˆæœ¬é«˜ã€‚</li>
<li>æŠ½è±¡åœ°ç‹±ï¼šå¤§å‹<code>React</code>å¾€å¾€ä½¿ç”¨<code>render props</code> ï¼Œ<code>HOC</code>ï¼Œ<code>Context</code> ç­‰é«˜é˜¶ç‰¹æ€§ï¼Œå½¢æˆå¤§é‡åŒ…è£…ç»„ä»¶ï¼ˆwrapping componentsï¼‰ã€‚å±‚çº§å†—ä½™ï¼Œé€»è¾‘éš¾è¿½è¸ªã€‚</li>
</ul>
<h1 id="Hooks-ä¼˜è¶Šæ€§"><a href="#Hooks-ä¼˜è¶Šæ€§" class="headerlink" title="Hooks ä¼˜è¶Šæ€§"></a>Hooks ä¼˜è¶Šæ€§</h1><p><code>Hooks</code> å¼•å…¥çš„ä¸€ä¸ªé‡è¦çš„åŸå› ï¼Œå°±æ˜¯ç±»ç»„ä»¶å­˜åœ¨ç€ç§ç§è¯Ÿç—…ã€‚é‚£ä»–å¿…ç„¶å­˜åœ¨ä¸€äº›ä¼˜è¶Šæ€§ã€‚</p>
<p>åœ¨è¯´æ˜è¿™äº›ä¼˜è¶Šæ€§ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸ªæ¦‚å¿µï¼š</p>
<blockquote>
<p><strong>å‰¯ä½œç”¨</strong>ï¼šReact ä¸­ä¸»è¦æŒ‡é‚£äº›æ²¡æœ‰å‘ç”Ÿåœ¨æ•°æ®å‘è§†å›¾ï¼ˆM-Vï¼‰è½¬æ¢è¿‡ç¨‹ä¸­çš„é€»è¾‘ï¼Œå¦‚ <code>Ajax</code> è¯·æ±‚ã€è®¿é—®åŸç”Ÿ <code>DOM</code> å…ƒç´ ã€æœ¬åœ°æŒä¹…åŒ–ç¼“å­˜ã€ç»‘å®š/è§£ç»‘äº‹ä»¶ã€æ·»åŠ /å–æ¶ˆè®¢é˜…ã€è®¾ç½®å®šæ—¶å™¨ã€è®°å½•æ—¥å¿—ç­‰ã€‚</p>
</blockquote>
<p>Hooks çš„ä¼˜è¶Šæ€§ï¼š</p>
<ul>
<li>å‡½æ•°å¼ç¼–ç¨‹ï¼šNo <code>class</code>, No <code>super</code>, No <code>this</code>ã€‚å¯¹äºä¸äº†è§£ <code>OOP</code> çš„ <code>React</code> åˆå­¦è€…æ›´å‹å¥½ã€‚</li>
<li>æœ‰çŠ¶æ€é€»è¾‘æ˜“å¤ç”¨ï¼šå¯ä»¥é€šè¿‡ <code>Custom Hook</code>ï¼ˆåé¢è®²è§£ï¼‰é‡æ„ï¼Œè€Œä¸ç”¨ä¿®æ”¹ç»„ä»¶ç»“æ„ã€‚</li>
<li>æ˜“æ‹†åˆ†ï¼šçŠ¶æ€ç®¡ç†å’Œå‰¯ä½œç”¨ç®¡ç†æ¾è€¦åˆï¼ŒåŸå­æ€§å¼ºã€‚å¾ˆå®¹æ˜“å°†ä¸€äº›ç›¸å…³è”çš„é€»è¾‘æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ã€‚</li>
<li>å¯é€æ­¥å¼•å…¥ï¼š<code>Hooks</code> å‘åå…¼å®¹ï¼Œä¸ç°æœ‰ä»£ç å¯å¹¶è¡Œå·¥ä½œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€æ­¥é‡‡ç”¨å®ƒä»¬ã€‚</li>
<li>å‰¯ä½œç”¨åˆ†ç»„ï¼šå¾ˆå¤šå‰¯ä½œç”¨é€»è¾‘åˆ†æ•£åœ¨ç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ã€‚è€Œ <code>Hooks</code> å¯ä»¥å°†æ¯ä¸ªå‰¯ä½œç”¨çš„è®¾ç½®å’Œæ¸…ç†å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ã€‚</li>
<li>å‰¯ä½œç”¨åˆ†ç¦»ï¼šå‰¯ä½œç”¨æ“ä½œéƒ½åœ¨é¡µé¢æ¸²æŸ“ä¹‹åã€‚</li>
</ul>
<h1 id="æŠ›å¼ƒç±»ç»„ä»¶ï¼Ÿ"><a href="#æŠ›å¼ƒç±»ç»„ä»¶ï¼Ÿ" class="headerlink" title="æŠ›å¼ƒç±»ç»„ä»¶ï¼Ÿ"></a>æŠ›å¼ƒç±»ç»„ä»¶ï¼Ÿ</h1><p>æ—¢ç„¶ <code>Hooks</code> å­˜åœ¨è¿™ä¹ˆå¤šä¼˜è¶Šæ€§ã€‚é‚£æ˜¯ä¸æ˜¯å°±åˆ°äº†æŠ›å¼ƒ <code>class</code> ç»„ä»¶çš„æ—¶å€™äº†ã€‚</p>
<p>å¯¹æ­¤ï¼Œå®˜æ–¹è¯´ï¼š</p>
<ul>
<li>æ–°ç‰ˆæœ¬ä¾ç„¶æ”¯æŒ <code>class</code> ç›¸å…³APIï¼Œåœ¨ç›¸å½“ä¸€æ®µæ—¶æœŸå†…ï¼Œ<code>class</code> ç»„ä»¶ å’Œ <code>Hooks</code> ç»„ä»¶å¹¶å­˜ã€‚</li>
<li>å‘åå…¼å®¹ï¼Œæ˜¯åŠ æ³•ã€‚æ³¨æ„ï¼Œæ˜¯å‡½æ•°ç»„ä»¶çš„åŠ æ³•ï¼Œå³ <code>Hooks</code> åªèƒ½ç”¨åœ¨å‡½æ•°ç»„ä»¶ä¸­ã€‚</li>
<li>æ¨èä½¿ç”¨ å‡½æ•°ç»„ä»¶ + <code>Hooks</code>ã€‚</li>
</ul>
<p>ä¸ªäººçœ‹æ³•ï¼š</p>
<p>ä¸æŠ›å¼ƒï¼Œä¸æ”¾å¼ƒã€‚<code>class</code> ç»„ä»¶å°†æˆ‘ä»¬å¸¦åˆ°äº† <code>OOP</code> çš„ä¸–ç•Œï¼Œ<code>OOP</code>åœ¨ç¼–ç¨‹ç•Œä¸¾è¶³è½»é‡ï¼Œå…¶æ€æƒ³æ˜¯å€¼å¾—å­¦ä¹ çš„ï¼Œè¿˜ä¼šé•¿æœŸå­˜åœ¨ã€‚å³ä¾¿ <code>class</code> ç»„ä»¶å·²ç„¶æˆä¸ºä¸€ç§å†å²äº§ç‰©ï¼Œä½†ä»–çš„å­˜é‡å·¨å¤§ï¼Œä¾ç„¶éœ€è¦å»ç»´æŠ¤ï¼Œå»æ…¢æ…¢æ¶ˆåŒ–ã€‚</p>
<p>æ‰€ä»¥ï¼š</p>
<ul>
<li>å¯¹äº <code>React</code> è€å¸æœºï¼šæ‹¥æŠ±<code>Hooks</code>ï¼Œæ˜¯æ‹¥æŠ±å˜åŒ–ã€‚è¿™ä¸ªå˜åŒ–ï¼Œæ˜¯åŠ æ³•ï¼Œæ˜¯å­¦ä¹ æ–°çš„<code>API</code>ï¼Œæ–°çš„æŠ€èƒ½ï¼Œæ–°çš„æ€æƒ³ã€‚</li>
<li>å¯¹äº <code>React</code> æ–°æ‰‹ï¼šæ‹¥æŠ±<code>Hooks</code>ï¼Œé™ä½äº†å­¦ä¹ é—¨æ§›ï¼Œå¯ä»¥æ›´å¿«å…¥é—¨ã€‚ä½†æ˜¯ç±»ç»„ä»¶ä¹Ÿéå¸¸æœ‰å¿…è¦å»äº†è§£ï¼Œç†è§£ã€‚çŸ¥å·±çŸ¥å½¼ï¼Œé‡æ„ä¸æ®†ã€‚</li>
</ul>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬æ¥å’Œè¿™äº› <code>React Hooks</code> çš„ <code>API</code> è§ä¸ªé¢ï¼š</p>
<p>åŸºç¡€ <code>Hook</code></p>
<ul>
<li><code>useState</code> ç®€å•çŠ¶æ€ç®¡ç†</li>
<li><code>useEffect</code> å‰¯ä½œç”¨ç®¡ç†</li>
</ul>
<p>å¸¸ç”¨ <code>Hook</code></p>
<ul>
<li><code>useContext</code> å…¨å±€çŠ¶æ€ç®¡ç†</li>
<li><code>useReducer</code> å¤æ‚çŠ¶æ€ç®¡ç†</li>
<li><code>useRef</code> è®¿é—® <code>Dom</code> å…ƒç´ </li>
</ul>
<p>å…¶ä»– <code>Hook</code></p>
<ul>
<li><code>useMemo</code></li>
<li><code>useCallback</code></li>
<li><code>useImperativeHandle</code></li>
<li><code>useLayoutEffect</code></li>
<li><code>useDebugValue</code></li>
<li>â€¦ è¿˜ä¼šå¢åŠ </li>
</ul>
<h1 id="useState-hook"><a href="#useState-hook" class="headerlink" title="useState hook"></a>useState hook</h1><ul>
<li>åŠŸèƒ½ï¼šåœ¨å‡½æ•°ç»„ä»¶ä¸­ç”¨æ¥è¿›è¡Œç®€å•çŠ¶æ€ç®¡ç†ï¼Œåˆ›å»º<strong>ä¸€äº›</strong>æœ¬åœ° <code>state</code>ã€‚</li>
<li>APIï¼š<code>const [currentState, setFunction] = useState(initialState);</code>ã€‚ä¼ ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ˆåŒ…å«ä¸¤ä¸ªå€¼ï¼‰- ä¸‰è¦ç´ ã€‚</li>
</ul>
<pre><code class="language-jsx">import React, { useState } from &#39;react&#39;;
function Form() {
  // ES6 è§£æ„
  const [name, setName] = useState(&#39;Mary&#39;);              // State å˜é‡ 1
  const [surname, setSurname] = useState(&#39;Poppins&#39;);     // State å˜é‡ 2
  const [width, setWidth] = useState(window.innerWidth); // State å˜é‡ 3

  function handleNameChange(e) {
    setName(e.target.value);
  }

  function handleSurnameChange(e) {
    setSurname(e.target.value);
  }

  return (
    &lt;&gt;
      &lt;input value={name} onChange={handleNameChange} /&gt;
      &lt;input value={surname} onChange={handleSurnameChange} /&gt;
      &lt;p&gt;Hello, {name} {surname}&lt;/p&gt;
      &lt;p&gt;Window width: {width}&lt;/p&gt;
    &lt;/&gt;
  );
}
export default Form;</code></pre>
<h2 id="useStateã€Œç²’åº¦ã€é—®é¢˜"><a href="#useStateã€Œç²’åº¦ã€é—®é¢˜" class="headerlink" title="useStateã€Œç²’åº¦ã€é—®é¢˜"></a>useStateã€Œç²’åº¦ã€é—®é¢˜</h2><p>çœ‹åˆ°è¿™é‡Œï¼Œå¯¹äºå†™è¿‡<code>class</code>ç»„ä»¶çš„æˆ‘ä»¬ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿä¸€ä¸ªç–‘é—®ã€‚ å®é™…å·¥ä½œä¸­ï¼Œä¸€ä¸ªç±»ç»„ä»¶çš„ <code>this.state</code> ä¸­å¾€å¾€æœ‰åå‡ é¡¹ï¼Œç”¨ <code>Hooks</code> æ”¹å†™çš„è¯éš¾é“è¦å†™åå‡ ä¸ª <code>useState</code> ä¹ˆï¼Ÿ</p>
<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œæ€»ç»“ä¸‹æ¥ï¼Œæœ‰å‡ ç‚¹ï¼š</p>
<ul>
<li>å»ºè®®å°† <code>state</code> åˆ†å‰²ä¸ºå¤šä¸ª <code>useState</code>ã€‚ç²’åº¦æ›´ç»†ï¼Œæ›´æ˜“äºç®¡ç†ï¼Œæ›´å¥½å¤ç”¨ã€‚</li>
<li>å¯èƒ½ä¸€èµ·æ”¹å˜çš„ <code>state</code> å¯åˆå¹¶æˆä¸€ä¸ª<code>useState</code>ï¼ˆ æ¯”å¦‚<code>Dom</code>å…ƒç´ çš„ <code>top</code> <code>left</code>ï¼‰ã€‚</li>
<li>å½“ <code>state</code> é€»è¾‘è¶‹äºå¤æ‚ï¼Œå»ºè®®ä½¿ç”¨ <code>useReducer</code> æˆ– <code>Custom Hook</code> ç®¡ç†ï¼ˆ<strong>åé¢ä»‹ç»</strong>ï¼‰ã€‚</li>
</ul>
<p>å½“ç»„ä»¶çš„ <code>state</code> å¾ˆå¤šçš„æ—¶å€™ï¼Œä¸ºäº†æé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œä¹Ÿå¯ä»¥æŠŠé€»è¾‘ç›¸å…³çš„ä¸€äº› <code>state</code> åˆå¹¶ä¸ºä¸€ä¸ª <code>useState</code>ï¼ˆ æ¯”å¦‚åˆ†é¡µå‚æ•° ï¼‰ã€‚ä½†è¿™äº› <code>state</code> å¹¶ä¸æ˜¯ä¸€èµ·æ”¹å˜çš„ï¼Œæ‰€ä»¥å½“å…¶ä¸­ä¸€ä¸ª <code>state</code> æ”¹å˜ï¼Œè°ƒç”¨å¯¹åº”çš„ <code>setFunction</code> çš„æ—¶å€™ã€‚ä½ éœ€è¦åš<strong>å¯¹è±¡åˆå¹¶</strong>(ä¸åˆå¹¶å°±ä¸¢äº†)ï¼š</p>
<pre><code class="language-jsx">const [ pageData, setPageDate ] = useState({ pageSize: 20, current: 1, total:0, })

const onPageChange = current =&gt; {
  // å¸¸è§„æ“ä½œ
  setPageDate( Object.assign( {}, pageData, { current } ) ï¼‰
  // å®˜æ–¹å»ºè®®
  setPageDate(currentPageData =&gt; ({ ...currentPageData, current}));
}
</code></pre>
<blockquote>
<p>çŸ¥è¯†ç‚¹ï¼šè°ƒç”¨ <code>useState</code> çš„æ›´æ–°å‡½æ•°æ—¶ï¼Œå¯ä»¥ä¼ ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„å‚æ•°æ˜¯å½“å‰æœ€æ–°çš„ <code>state</code>ï¼Œ è¿”å›å€¼æ˜¯è¦è®¾ç½®çš„ <code>state</code>ã€‚</p>
</blockquote>
<h1 id="useEffect-hook"><a href="#useEffect-hook" class="headerlink" title="useEffect hook"></a>useEffect hook</h1><p>API å¯æŠ½è±¡ä¸º: <code>useEffect(arrowFunction, [depsArr])</code> </p>
<ul>
<li><code>arrowFunction</code>: å¿…é¡»ã€‚æ‰§è¡Œå‡½æ•°ï¼Œæ‰§è¡Œå‰¯ä½œç”¨æ“ä½œã€‚å®ƒå†³å®šäº†åšä»€ä¹ˆã€‚</li>
<li><code>depsArr</code>: éå¿…é¡»ã€‚ä¸€ä¸ªä¾èµ–é¡¹æ•°ç»„ã€‚å®ƒå†³å®šäº†ä»€ä¹ˆæ—¶å€™åšï¼ˆä¸‹é¢ç¤ºä¾‹ä¸­ä»‹ç»ï¼‰ã€‚</li>
</ul>
<p>æ ¹æ®å®é™…æƒ…å†µï¼Œå¯ç»†åˆ†ä¸ºä¸‰ç§ï¼š</p>
<pre><code class="language-jsx">// ç¬¬ä¸€ç§
// æœ€åŸºç¡€çš„ï¼Œåªæœ‰ç®­å¤´å‡½æ•°ã€‚æ²¡æœ‰ä¾èµ–é¡¹ï¼Œæ‰€ä»¥ç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œã€‚
// ç›¸å½“äº  componentDidMount + componentDidUpdate
useEffect(() =&gt; { 
  //side-effect 
})
// ç¬¬äºŒç§
// æœ‰ä¾èµ–é¡¹ï¼Œæ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå› ä¸ºå®ƒæ°¸è¿œä¸ä¼šå˜ï¼Œæ‰€ä»¥åªä¼šé¦–æ¬¡æ‰§è¡Œã€‚
// ç›¸å½“äº componentDidMount
useEffect(() =&gt; { 
  //side-effect 
}, [])
// ç¬¬ä¸‰ç§
// æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¸”éç©ºæ•°ç»„ã€‚é¦–æ¬¡æ¸²æŸ“ä¼šæ‰§è¡Œã€‚é‡æ–°æ¸²æŸ“æ—¶ï¼Œåªæœ‰å½“ä¾èµ–é¡¹çš„å€¼æ”¹å˜äº†æ‰ä¼šæ‰§è¡Œã€‚
useEffect(() =&gt; { 
  //side-effect 
}, [...state])</code></pre>
<p>æ€»ç»“ä¸‹æ¥ï¼š</p>
<ul>
<li>åŠŸèƒ½ï¼šç®¡ç† <code>React</code> å‡½æ•°ç»„ä»¶çš„å‰¯ä½œç”¨ï¼Œèµ‹äºˆç”Ÿå‘½å‘¨æœŸèƒ½åŠ›ã€‚</li>
<li>æ€ä¹ˆç®¡ï¼šç»„ä»¶æ¯æ¬¡æ¸²æŸ“åˆ°å±å¹•ä¹‹åï¼Œæ ¹æ®ä¾èµ–é¡¹çš„æƒ…å†µåˆ¤æ–­æ˜¯å¦è°ƒç”¨æ‰§è¡Œå‡½æ•°ã€‚</li>
<li>äºŒè¦ç´ ï¼šæ‰§è¡Œå‡½æ•°ï¼Œä¾èµ–é¡¹ã€‚</li>
<li>æ¸…ç†æœºåˆ¶ï¼šä½ å¯ä»¥åœ¨æ‰§è¡Œå‡½æ•°ä¸­è¿”å›å¦ä¸€ä¸ªå‡½æ•°-<strong>æ¸…ç†å‡½æ•°</strong>ï¼Œæ¸…ç†å‡½æ•°ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™ï¼Œä¼šåœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¸”useEffectçš„ä¾èµ–é¡¹å€¼æ”¹å˜çš„æ—¶å€™è°ƒç”¨ã€‚èµ·åˆ°äº† class ç»„ä»¶ä¸­<code>componentWillUnmount</code>çš„ä½œç”¨, åç»­ä¼šåœ¨åœºæ™¯å®ä¾‹ä¸­ä»‹ç»ã€‚</li>
<li>ä½¿ç”¨ä¸Šï¼šå’Œ <code>useState</code> ä¸€æ ·ï¼Œå¯ä½¿ç”¨å¤šä¸ªã€‚å»ºè®®ä¸€ä¸ªå‰¯ä½œç”¨å¯¹åº”ä¸€ä¸ª <code>useEffect</code>ã€‚</li>
</ul>
<p>ä»¥å®šæ—¶å™¨ä¸ºä¾‹ï¼Œè®©æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç§’è¡¨ç»„ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ å’Œç†è§£ <code>useEffect</code> éå¸¸æœ‰æ„æ€çš„ä¾‹å­:</p>
<pre><code class="language-jsx">import React, { useState, useEffect } from &#39;react&#39;;

function App() {
  // ç§’è¡¨å¼€å…³
  const [isOn, setIsOn] = useState(false);
  // è®¡æ•°
  const [timer, setTimer] = useState(0);

  useEffect(() =&gt; {
    let interval;
    //å¼€å…³æ‰“å¼€çš„æ—¶å€™æ‰æ‰§è¡Œ
    if (isOn) {
      // é€šè¿‡å®šæ—¶å™¨å¢åŠ è®¡æ•°
      interval = setInterval(
        () =&gt; setTimer(val =&gt; val + 1),
        1000,
      );
    }
    // éœ€è¦æ¸…é™¤å®šæ—¶å™¨
    return () =&gt; clearInterval(interval);
  },[isOn]);

  return (
    &lt;&gt;
      &lt;p&gt;{timer}&lt;/p&gt;

      {!isOn &amp;&amp; (
        &lt;button type=&quot;button&quot; onClick={() =&gt; setIsOn(true)}&gt;
          Start
        &lt;/button&gt;
      )}

      {isOn &amp;&amp; (
        &lt;button type=&quot;button&quot; onClick={() =&gt; setIsOn(false)}&gt;
          Stop
        &lt;/button&gt;
      )}
    &lt;/&gt;
  );
}

export default App;
</code></pre>
<blockquote>
<p>è§„åˆ™ï¼š<code>useEffect</code> ä¸èƒ½æ¥æ”¶ <code>async</code> ä½œä¸ºæ‰§è¡Œå‡½æ•°ã€‚<code>useEffect</code> æ¥æ”¶çš„å‡½æ•°ï¼Œè¦ä¹ˆè¿”å›ä¸€ä¸ªèƒ½æ¸…é™¤å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œè¦ä¹ˆå°±ä¸è¿”å›ä»»ä½•å†…å®¹ã€‚è€Œ <code>async</code> è¿”å›çš„æ˜¯ <code>promise</code>ã€‚<br><code>useEffect</code> è°ƒç”¨çš„å‡½æ•°å¦‚æœä¾èµ– <code>state</code> æˆ–è€… <code>props</code>ã€‚æœ€å¥½åœ¨æ‰§è¡Œå‡½æ•°ä¸­å®šä¹‰ã€‚è¿™æ ·ä¾èµ–å®¹æ˜“è¿½è¸ªã€‚</p>
</blockquote>
<p><code>useEffect</code> çš„ä½¿ç”¨ï¼Œçœ‹èµ·æ¥å¾ˆç®€å•ã€‚ä½†æ˜¯è¦åšåˆ°ä¸æ»¥ç”¨ï¼Œæ­£ç¡®ä½¿ç”¨ä¹Ÿä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ã€‚ä¸»è¦åœ¨ä½¿ç”¨ä¹‹å‰è¦å¤šä¸€äº›æ€è€ƒã€‚</p>
<h1 id="Custom-Hooks"><a href="#Custom-Hooks" class="headerlink" title="Custom Hooks"></a>Custom Hooks</h1><p>å®ƒå¹¶ä¸æ˜¯ <code>React hooks</code> çš„ <code>API</code>ï¼Œè€Œæ˜¯<strong>è‡ªå®šä¹‰ hook</strong>ã€‚é¡¾åæ€ä¹‰ï¼Œ<code>React</code>å…è®¸ä½ æ„å»ºè‡ªå·±çš„ <code>hooks</code>ã€‚åœ¨å­¦ä¹ å®Œå‰é¢ä¸¤ä¸ªæœ€å—æ¬¢è¿çš„ <code>hooks</code> ä»¥åï¼Œä½ å®Œå…¨å…·å¤‡äº†å®ç°è‡ªå®šä¹‰ <code>hooks</code> çš„èƒ½åŠ›ã€‚</p>
<blockquote>
<p>å®˜ç½‘å®šä¹‰ï¼š è‡ªå®šä¹‰ <code>Hook</code> æ˜¯ä¸€ä¸ª <code>JavaScript</code> å‡½æ•°ï¼Œå…¶åç§°ä»¥ <code>â€useâ€</code> å¼€å¤´ï¼Œå¯ä»¥è°ƒç”¨å…¶ä»– <code>Hook</code>ã€‚</p>
</blockquote>
<p>ä¸ºä»€ä¹ˆéœ€è¦<code>Custom Hooksï¼Ÿ</code></p>
<ul>
<li><code>useState</code> è§£å†³äº†å‡½æ•°ç»„ä»¶æ— çŠ¶æ€çš„é—®é¢˜ã€‚</li>
<li><code>useEffect</code> å®ç°äº†å‰¯ä½œç”¨ç®¡ç†ï¼Œç”Ÿå‘½å‘¨æœŸçš„åŠŸèƒ½ã€‚</li>
<li><code>Custom Hooks</code> å°†è§£å†³æœ‰çŠ¶æ€ï¼ˆ<code>stateful</code>ï¼‰é€»è¾‘å…±äº«çš„é—®é¢˜ï¼ˆç›¸å½“äºç±»ç»„ä»¶ä¸­<code>Hoc</code>çš„åŠŸèƒ½ï¼‰ã€‚ğŸ‘‡</li>
</ul>
<p>æˆ‘ä»¬æ¥åˆ°ä¸€ä¸ªå®é™…åœºæ™¯ã€‚å¦‚ä»Š <code>HTML5</code> ç§»åŠ¨åº”ç”¨æˆ– <code>Web app</code> ä¸­è¶Šæ¥è¶Šæ™®éçš„ä½¿ç”¨äº†ç¦»çº¿æµè§ˆæŠ€æœ¯ï¼Œæ‰€ä»¥ç”¨ <code>JS</code> æ£€æµ‹æµè§ˆå™¨åœ¨çº¿/ç¦»çº¿çŠ¶æ€éå¸¸å¸¸è§ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨ <code>React Hooks</code> æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š</p>
<pre><code class="language-jsx">import React, { useState, useEffect } from &#39;react&#39;;
function App() {
  const [isOffline, setIsOffline] = useState(window.navigator.onLine);
  // ç¦»çº¿äº‹ä»¶å¤„ç†æ–¹æ³•
  function onOffline() {
    setIsOffline(true);
  }
  // åœ¨çº¿äº‹ä»¶å¤„ç†æ–¹æ³•
  function onOnline() {
    setIsOffline(false);
  }
  useEffect(() =&gt; {
    // äº‹ä»¶ç›‘å¬
    window.addEventListener(&#39;offline&#39;, onOffline);
    window.addEventListener(&#39;online&#39;, onOnline);
    // æ¸…ç†å‡½æ•°
    return () =&gt; {
      window.removeEventListener(&#39;offline&#39;, onOffline);
      window.removeEventListener(&#39;online&#39;, onOnline);
    };
  }, []); // åªéœ€è¦é¦–æ¬¡æ‰§è¡Œ
  return (
    &lt;&gt;
       { 
         isOffline
         ? &lt;div&gt;ç½‘æ–­å·²æ–­å¼€ ...&lt;/div&gt;
         : &lt;div&gt;ç½‘ç»œå·²è¿æ¥ ...&lt;/div&gt;
       }
    &lt;/&gt;
  )
}
export default App;</code></pre>
<blockquote>
<p>æ— è®ºæµè§ˆå™¨æ˜¯å¦åœ¨çº¿ï¼Œ<code>navigator.onLine</code> å±æ€§éƒ½ä¼šæä¾›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ å¦‚æœæµè§ˆå™¨åœ¨çº¿ï¼Œåˆ™è®¾ç½®ä¸º <code>true</code> ï¼Œå¦åˆ™è®¾ç½®ä¸º <code>false</code> ã€‚</p>
</blockquote>
<p>OKï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå¾ˆä¸é”™çš„åŠŸèƒ½ã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯å¯å¤ç”¨çš„ï¼Œåº”è¯¥å…±äº«çš„ã€‚<br>æˆ‘ä»¬æŠŠåŠŸèƒ½é€»è¾‘æå–å‡ºæ¥ï¼ŒæŠŠå®ƒå°è£…æˆä¸€ä¸ª <code>Custom hook</code> å°±å¯ä»¥äº†ï¼š</p>
<pre><code class="language-jsx">import React, { useState, useEffect } from &#39;react&#39;;
// è‡ªå®šä¹‰ hook
function useOffline() {
  const [isOffline, setIsOffline] = useState(window.navigator.onLine);
  function onOffline() {
    setIsOffline(true);
  }
  function onOnline() {
    setIsOffline(false);
  }
  useEffect(() =&gt; {
    window.addEventListener(&#39;offline&#39;, onOffline);
    window.addEventListener(&#39;online&#39;, onOnline);
    return () =&gt; {
      window.removeEventListener(&#39;offline&#39;, onOffline);
      window.removeEventListener(&#39;online&#39;, onOnline);
    };
  }, []);
  return isOffline; // åªæš´éœ²ä¸€ä¸ª state
}

// å‡½æ•°ç»„ä»¶
function App() {
  const isOffline = useOffline();
  return (
    &lt;&gt;
       { 
         isOffline
         ? &lt;div&gt;ç½‘æ–­å·²æ–­å¼€ ...&lt;/div&gt;
         : &lt;div&gt;ç½‘ç»œå·²è¿æ¥ ...&lt;/div&gt;
       }
    &lt;/&gt;
  )
}
export default App;</code></pre>
<p>ä»é‡æ„å±‚é¢æ¥è¯´ï¼Œå°±æ˜¯æŠŠç»„ä»¶ä¸­çš„ä¸€äº› <code>hooks</code> æŠ½ç¦»åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå†ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å°±æ˜¯ <code>React custom hooks</code>ã€‚</p>
<p>ä¹¦å†™ <code>custom hooks</code> éœ€è¦æ³¨æ„äº›ä»€ä¹ˆå‘¢ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰ <code>Hooks</code> è‡ªç„¶åœ°éµå¾ª <code>Hooks</code> è®¾è®¡çš„çº¦å®šã€‚å³éµå¾ªæ‰€æœ‰ä½ ç”¨åˆ°çš„ <code>Hooks</code>  çš„è§„åˆ™ã€‚</li>
<li>è¯·ä½¿ç”¨ <code>use</code> å¼€å¤´ã€‚è¿™ä¸ªä¹ æƒ¯éå¸¸é‡è¦ã€‚å¦‚æœæ²¡æœ‰å®ƒï¼Œæˆ‘ä»¬å°±ä¸èƒ½è‡ªåŠ¨æ£€æŸ¥è¯¥ <code>Hook</code> æ˜¯å¦è¿åäº† <code>Hooks</code> çš„è§„åˆ™ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•åˆ¤æ–­æŸä¸ªå‡½æ•°æ˜¯å¦åŒ…å«å¯¹å…¶å†…éƒ¨ <code>Hooks</code> çš„è°ƒç”¨ã€‚</li>
</ul>
<h1 id="useRef-Hook"><a href="#useRef-Hook" class="headerlink" title="useRef Hook"></a>useRef Hook</h1><p>åœ¨å…¸å‹çš„ <code>React</code> æ•°æ®æµä¸­ï¼Œ<code>DOM</code> å…ƒç´ çš„ä¿®æ”¹éƒ½æ˜¯é€šè¿‡ <code>M-V</code> çš„å½¢å¼é‡æ–°æ¸²æŸ“ã€‚<code>M</code> ä¸»è¦æ˜¯ç»„ä»¶çš„æœ¬åœ° <code>state</code> ï¼Œä»¥åŠçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„ <code>props</code>ã€‚<br>ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨å…¸å‹æ•°æ®æµä¹‹å¤–ï¼Œæ‰‹åŠ¨ä½¿ç”¨/æ“ä½œ <code>DOM</code>ï¼š</p>
<ul>
<li>ç®¡ç†ç„¦ç‚¹ï¼Œåª’ä½“æ’­æ”¾ï¼Œæ–‡æœ¬é€‰æ‹©ï¼Œè§¦å‘å¼ºåˆ¶åŠ¨ç”»ç­‰ã€‚</li>
<li>é›†æˆç¬¬ä¸‰æ–¹ <code>DOM</code> åº“ã€‚</li>
</ul>
<pre><code class="language-jsx">import React, { useState, useEffect, useRef } from &quot;react&quot;;
function App() {
  const [value, setValue] = useState(&quot;hellow hooks&quot;);
  //åˆ›å»º refs åªæœ‰è¿™é‡Œæœ‰ä¿®æ”¹
  const inputRef = useRef();
  // æ—¥å¿—A
  console.log(inputRef.current) 
  useEffect(() =&gt; {
    // æ—¥å¿—B
    console.log(inputRef.current);
    inputRef.current.focus();
  });
  function inputHandler(val) {
    setValue(val.target.value);
  }
  return (
    &lt;&gt;
      &lt;input type=&quot;text&quot; value={value} ref={inputRef} onChange={inputHandler} /&gt;
    &lt;/&gt;
  );
}
export default App;</code></pre>
<ul>
<li>ç±»ç»„ä»¶ä¸­ï¼š<code>React16.3</code> åŠä»¥ä¸Šç‰ˆæœ¬å»ºè®®ä½¿ç”¨ <code>React.createRef</code> è¿™ä¸ª<code>API</code>ï¼Œä½ç‰ˆæœ¬ä½¿ç”¨ <code>å›è°ƒrefs</code>ã€‚</li>
<li>å‡½æ•°ç»„ä»¶ä¸­ï¼šä¸ºæ€§èƒ½è€ƒè™‘ï¼Œå»ºè®®éƒ½ä½¿ç”¨ <code>useRef</code> è¿™ä¸ª <code>hook</code>ã€‚</li>
</ul>
<h1 id="useContext-Hook"><a href="#useContext-Hook" class="headerlink" title="useContext Hook"></a>useContext Hook</h1><p><code>React 16.3.0</code> ä¸­å¼•å…¥äº† <code>Context</code> ç³»åˆ— <code>API</code>ã€‚ç”¨äºå…±äº«é‚£äº›å¯¹äºä¸€ä¸ªç»„ä»¶æ ‘è€Œè¨€æ˜¯ â€œå…¨å±€â€ çš„ <code>state</code>ã€‚å¯ç”¨äºè§£å†³ <code>prop drilling</code> é—®é¢˜ã€‚</p>
<p><code>useContext Hook</code> åªæ˜¯æ–°å¢äº†ä¸€ç§æ–¹å¼ï¼Œè®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ›´æ–¹ä¾¿ï¼Œæ›´ä¼˜é›…çš„æ¶ˆè´¹ <code>context</code>:</p>
<pre><code class="language-jsx">//
// ç›®æ ‡å­ç»„ä»¶ - D
// ä½¿ç”¨ context å¯¹è±¡çš„ Consumer ç»„ä»¶è·å–å…±äº«æ•°æ®,é€šè¿‡æ›´æ–°å‡½æ•°æ›´æ–°æ•°æ®
const D = () =&gt; (
  const { value, setValue } = React.useContext(MyContext)
  return (
    &lt;input
      type=&quot;text&quot;
      value={value}
      onChange={e =&gt; {
        setValue(e.target.value);
      }}
    /&gt;
  )
);</code></pre>
<p>å¯è¯»æ€§æ›´é«˜äº†ï¼Œè¿˜å¯å¾ˆæ–¹ä¾¿çš„æ¶ˆè´¹å¤šä¸ª <code>context</code>ã€‚</p>
<h1 id="UseReducer-Hook"><a href="#UseReducer-Hook" class="headerlink" title="UseReducer Hook"></a>UseReducer Hook</h1><p><code>useReducer hook</code> ç”¨äº <code>React</code> å‡½æ•°ç»„ä»¶ä¸­ç®¡ç†<strong>å¤æ‚çš„</strong> <code>state</code> ã€‚å®ƒæŠŠä¸€ä¸ª<code>reducer</code>æ–¹æ³•ï¼Œå’Œåˆå§‹<code>state</code>ä½œä¸ºè¾“å…¥ï¼ŒåŒ…å«å½“å‰<code>state</code>ï¼Œå’Œä¸€ä¸ª<code>dispatch</code>æ–¹æ³•çš„è§£æ„æ•°ç»„ä½œä¸ºè¾“å‡ºã€‚</p>
<p><code>API</code>ï¼ˆ å¯¹ç…§ <code>useState</code> ï¼‰ï¼š</p>
<pre><code class="language-js">// useReducer hook API
const [current, dispatch] = useReducer(reducer, initState);

// useState hook API
const [current, setFunc] = useReducer(initState);
</code></pre>
<p>æ¥çœ‹ä¸€ä¸ªä½¿ç”¨ <code>useReducer</code> çš„ç®€å•ä¾‹å­ï¼š</p>
<pre><code class="language-jsx">const initialState = {count: 0};

function reducer(state, action) {
  switch (action.type) {
    case &#39;increment&#39;:
      return {count: state.count + 1};
    case &#39;decrement&#39;:
      return {count: state.count - 1};
    default:
      throw new Error();
  }
}

function Counter() {
  const [state, dispatch] = useReducer(reducer, initialState);
  return (
    &lt;&gt;
      Count: {state.count}
      &lt;button onClick={() =&gt; dispatch({type: &#39;decrement&#39;})}&gt;-&lt;/button&gt;
      &lt;button onClick={() =&gt; dispatch({type: &#39;increment&#39;})}&gt;+&lt;/button&gt;
    &lt;/&gt;
  );
}
</code></pre>
<p>ä¸Šè¿°ç¤ºä¾‹ä¸­çš„ <code>state</code> å¾ˆç®€å•ï¼Œå…¶å®ä½¿ç”¨ <code>useState</code> å°±å¯ä»¥ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨ <code>useReducer</code> å‘¢ï¼Ÿ</p>
<p>é€‚ç”¨äº<code>useReducer</code> çš„å¤æ‚ <code>state</code> çš„åœºæ™¯ä¸»è¦æœ‰:</p>
<ul>
<li><code>state</code> é€»è¾‘è¾ƒå¤æ‚ä¸”åŒ…å«å¤šä¸ªå­å€¼ï¼ˆå¤§çš„å¯¹è±¡ï¼Œæ•°ç»„ï¼‰ã€‚</li>
<li><code>state</code> æ›´æ–°ä¾èµ–äºä¹‹å‰çš„ <code>state</code>ã€‚</li>
<li><code>state</code> ç»„ä»¶æ ‘æ·±å±‚æ›´æ–°ã€‚ä½¿ç”¨<code>useReducer</code>å¯ä»¥å‘å­ç»„ä»¶ä¼ é€’ <code>dispatch</code> è€Œä¸æ˜¯å›è°ƒå‡½æ•°ï¼Œè¿™æ ·å¯ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
<h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><ul>
<li><strong>é›†ä¸­ç®¡ç†</strong>ï¼šæ¯ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ª â€œå†…å­˜å•å…ƒâ€ çš„å†…éƒ¨åˆ—è¡¨ï¼Œä½œä¸º <code>Hooks</code>ç®¡ç†ä¸­å¿ƒã€‚</li>
<li><strong>just js</strong>ï¼šåªæ˜¯ <code>JavaScript</code> å¯¹è±¡ + é—­åŒ…ã€‚ä½ å¯ä»¥æƒ³è±¡å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆå®é™…ä¸Šæ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­æ”¾ç½®ä¸€äº›æ•°æ®ã€‚</li>
<li><strong>é¡ºåºè°ƒç”¨</strong>ï¼šå½“ç»„ä»¶è°ƒç”¨ <code>useState()</code> ç­‰ <code>Hook</code> æ—¶ï¼Œå®ƒè¯»å–å½“å‰å•å…ƒæ ¼(æˆ–åœ¨ç¬¬ä¸€æ¬¡å‘ˆç°æ—¶åˆå§‹åŒ–å®ƒ)ï¼Œç„¶åå°†æŒ‡é’ˆ(<code>cursor</code>) ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•å…ƒæ ¼ã€‚è¿™å°±æ˜¯å¤šä¸ª <code>useState()</code> è°ƒç”¨å„è‡ªè·å–ç‹¬ç«‹æœ¬åœ°<code>state</code>çš„æ–¹å¼ã€‚</li>
</ul>
<img src="/2020/05/24/React-Hooks-%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/react-hooks2.jpg" class="" title="hooksåŸç†">

<h1 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h1><p>éœ€è¦å¼€å‘è€…éµä»è®¸å¤šè§„åˆ™ã€‚ç†è§£å¹¶åˆç†è¿ç”¨è¿™äº›è§„åˆ™ï¼Œèƒ½å†™å‡ºä¼˜é›…çš„ï¼Œå¯è¯»æ€§é«˜çš„ï¼Œæ€§èƒ½å¥½çš„ä»£ç ã€‚åä¹‹ï¼Œå¾ˆå®¹æ˜“å‡ºç°æ­»å¾ªç¯ï¼Œæ•°æ®é‡å¤è¯·æ±‚ç­‰é—®é¢˜ã€‚æœ€è®©äººæ‹…å¿ƒçš„æ˜¯æ€§èƒ½ï¼Œå¾ˆå¤šæ—¶å€™ä¸šåŠ¡åŠŸèƒ½å®ç°äº†ï¼Œä½†æ˜¯å…¶å®å­˜åœ¨å¾ˆå¤šä¸å¿…è¦çš„å¼€é”€ã€‚</p>
<hr>
<p><strong>å‚è€ƒèµ„æ–™</strong><br><a href="http://react.html.cn/docs/hooks-intro.html" target="_blank" rel="noopener">å®˜ç½‘-Hooks</a><br><a href="https://www.robinwieruch.de/react-hooks" target="_blank" rel="noopener">What Are React Hooks</a><br><a href="https://juejin.im/post/5dbbdbd5f265da4d4b5fe57d#heading-17" target="_blank" rel="noopener">React Hooks è¯¦è§£ + é¡¹ç›®å®æˆ˜</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/05/13/Nodejs%E5%B7%A5%E5%85%B7-Commander/" rel="next" title="(Nodejs å¼€å‘ cli å·¥å…·) - Commander">
                <i class="fa fa-chevron-left"></i> (Nodejs å¼€å‘ cli å·¥å…·) - Commander
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/07/14/React%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86/" rel="prev" title="Reactæ ¸å¿ƒåŸç†">
                Reactæ ¸å¿ƒåŸç† <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/sgj.jpeg"
                alt="ç¥è¿" />
            
              <p class="site-author-name" itemprop="name">ç¥è¿</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                å¤§ç‰›ğŸ‘‡
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ruanyifeng.com/blog/" title="é˜®ä¸€å³°" target="_blank">é˜®ä¸€å³°</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://overreacted.io/zh-hans/" title="Dan Abramov" target="_blank">Dan Abramov</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://qianduan.group/" title="å¯¸å¿—" target="_blank">å¯¸å¿—</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.robinwieruch.de/blog" title="Robin Wieruch" target="_blank">Robin Wieruch</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#React-Hooks-èµ·æº"><span class="nav-number">1.</span> <span class="nav-text">React Hooks èµ·æº</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç±»ç»„ä»¶è¢«è¯Ÿç—…"><span class="nav-number">2.</span> <span class="nav-text">ç±»ç»„ä»¶è¢«è¯Ÿç—…</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Hooks-ä¼˜è¶Šæ€§"><span class="nav-number">3.</span> <span class="nav-text">Hooks ä¼˜è¶Šæ€§</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æŠ›å¼ƒç±»ç»„ä»¶ï¼Ÿ"><span class="nav-number">4.</span> <span class="nav-text">æŠ›å¼ƒç±»ç»„ä»¶ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#useState-hook"><span class="nav-number">5.</span> <span class="nav-text">useState hook</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#useStateã€Œç²’åº¦ã€é—®é¢˜"><span class="nav-number">5.1.</span> <span class="nav-text">useStateã€Œç²’åº¦ã€é—®é¢˜</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#useEffect-hook"><span class="nav-number">6.</span> <span class="nav-text">useEffect hook</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Custom-Hooks"><span class="nav-number">7.</span> <span class="nav-text">Custom Hooks</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#useRef-Hook"><span class="nav-number">8.</span> <span class="nav-text">useRef Hook</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#useContext-Hook"><span class="nav-number">9.</span> <span class="nav-text">useContext Hook</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UseReducer-Hook"><span class="nav-number">10.</span> <span class="nav-text">UseReducer Hook</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åŸç†"><span class="nav-number">11.</span> <span class="nav-text">åŸç†</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç¼ºç‚¹"><span class="nav-number">12.</span> <span class="nav-text">ç¼ºç‚¹</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ç¥è¿</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




<script src="/js/prism/prism.js" async></script>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.9},"log":false});</script></body>
</html>
